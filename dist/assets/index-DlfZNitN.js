const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auth-w8pRG8Mc.js","assets/vue-vendor-DBH4gaed.js","assets/vue-vendor-DKnpeO9N.css","assets/stores-BYixwwI5.js","assets/services-B6m35qR1.js","assets/ui-vendor-D2Zhk6Dz.js","assets/supabase-vendor-CEZ1HC2p.js","assets/components-CxTxZpxR.js","assets/admin-p6Pbvhvw.js","assets/admin-CS0t2738.css","assets/components-DBbgUHEN.css","assets/auth-BOm5p0aR.css","assets/users-CE28I-1F.js","assets/users-DiPplVvR.css","assets/content-BIIrP1ff.js","assets/content-DzqtKP0I.css","assets/communication-DjiRjLK_.js","assets/communication-CrV_RFMI.css","assets/LayoutTestView-D3b6xpaB.js","assets/LayoutTestView-CJAVXg1_.css","assets/StatePersistenceTestView-DxcF-_3K.js","assets/StatePersistenceTestView-Btj9R-iL.css","assets/NotFoundView-Cs990e7P.js","assets/NotFoundView-DTvrsIw8.css"])))=>i.map(i=>d[i]);
import{d as R,y as B,r as b,o as T,z as q,q as I,a as c,i as m,e as u,w as d,b as v,m as y,g as p,f as E,K as C,I as F,J as U,L as k,M,N as S,O as N,P as z,Q as x,R as G,S as H,T as K}from"./vue-vendor-DBH4gaed.js";import"./vendor-CqqGrtmW.js";import{u as P}from"./stores-BYixwwI5.js";import{c as _}from"./services-B6m35qR1.js";import{c as j,_ as i}from"./components-CxTxZpxR.js";import"./supabase-vendor-CEZ1HC2p.js";import"./ui-vendor-D2Zhk6Dz.js";import"./admin-p6Pbvhvw.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();const $={key:0,class:"loading-screen"},J={class:"text-center"},Q={key:1},W=R({__name:"App",setup(e){B();const s=P(),a=b(["AppLayout","DashboardView","UsersView","PetsView","AppointmentsView","ProductsView","OrdersView","AnalyticsView","MessagesView","NotificationsView","SettingsView"]),t=n=>!["Login","NotFound"].includes(n.name),r=n=>{var o;return(o=n.params)!=null&&o.id?`${n.name}-${n.params.id}`:n.name||n.path};return T(async()=>{await s.initialize(),s.isAuthenticated&&_.startMonitoring()}),q(()=>s.isAuthenticated,n=>{n?(console.log("ðŸ” User authenticated, starting connection monitoring"),_.startMonitoring()):(console.log("ðŸ›‘ User not authenticated, stopping connection monitoring"),_.stopMonitoring())}),I(()=>{_.stopMonitoring(),s.cleanup()}),(n,o)=>{const h=c("v-progress-circular"),V=c("v-col"),w=c("v-row"),D=c("v-container"),O=c("router-view"),L=c("v-app");return u(),m(L,null,{default:d(()=>[y(s).loading&&!y(s).initialized?(u(),v("div",$,[p(D,{class:"fill-height",fluid:""},{default:d(()=>[p(w,{align:"center",justify:"center"},{default:d(()=>[p(V,{cols:"auto"},{default:d(()=>[E("div",J,[p(h,{size:60,width:4,color:"primary",indeterminate:"",class:"mb-4"}),o[0]||(o[0]=E("h3",{class:"text-h6 text-medium-emphasis"}," Initializing PetSmart Admin... ",-1))])]),_:1})]),_:1})]),_:1})])):(u(),v("div",Q,[p(O,null,{default:d(({Component:A,route:g})=>[t(g)?(u(),m(j,{key:0},{default:d(()=>[(u(),m(C,{include:a.value},[(u(),m(F(A),{key:r(g)}))],1032,["include"]))]),_:2},1024)):(u(),m(F(A),{key:r(g)}))]),_:1})]))]),_:1})}}}),f=U({history:k("/"),routes:[{path:"/",redirect:"/dashboard"},{path:"/login",name:"Login",component:()=>i(()=>import("./auth-w8pRG8Mc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),meta:{requiresGuest:!0}},{path:"/dashboard",name:"Dashboard",component:()=>i(()=>import("./admin-p6Pbvhvw.js").then(e=>e.D),__vite__mapDeps([8,1,2,5,9])),meta:{requiresAuth:!0}},{path:"/users",name:"Users",component:()=>i(()=>import("./users-CE28I-1F.js").then(e=>e.U),__vite__mapDeps([12,1,2,4,3,5,6,7,8,9,10,13])),meta:{requiresAuth:!0}},{path:"/users/:id",name:"UserDetail",component:()=>i(()=>import("./users-CE28I-1F.js").then(e=>e.a),__vite__mapDeps([12,1,2,4,3,5,6,7,8,9,10,13])),meta:{requiresAuth:!0}},{path:"/pets",name:"Pets",component:()=>i(()=>import("./content-BIIrP1ff.js").then(e=>e.P),__vite__mapDeps([14,1,2,4,3,5,6,7,8,9,10,15])),meta:{requiresAuth:!0}},{path:"/appointments",name:"Appointments",component:()=>i(()=>import("./content-BIIrP1ff.js").then(e=>e.A),__vite__mapDeps([14,1,2,4,3,5,6,7,8,9,10,15])),meta:{requiresAuth:!0}},{path:"/products",name:"Products",component:()=>i(()=>import("./content-BIIrP1ff.js").then(e=>e.a),__vite__mapDeps([14,1,2,4,3,5,6,7,8,9,10,15])),meta:{requiresAuth:!0}},{path:"/products/new",name:"NewProduct",component:()=>i(()=>import("./content-BIIrP1ff.js").then(e=>e.b),__vite__mapDeps([14,1,2,4,3,5,6,7,8,9,10,15])),meta:{requiresAuth:!0}},{path:"/products/:id/edit",name:"EditProduct",component:()=>i(()=>import("./content-BIIrP1ff.js").then(e=>e.b),__vite__mapDeps([14,1,2,4,3,5,6,7,8,9,10,15])),meta:{requiresAuth:!0}},{path:"/orders",name:"Orders",component:()=>i(()=>import("./content-BIIrP1ff.js").then(e=>e.O),__vite__mapDeps([14,1,2,4,3,5,6,7,8,9,10,15])),meta:{requiresAuth:!0}},{path:"/orders/:id",name:"OrderDetail",component:()=>i(()=>import("./content-BIIrP1ff.js").then(e=>e.c),__vite__mapDeps([14,1,2,4,3,5,6,7,8,9,10,15])),meta:{requiresAuth:!0}},{path:"/messages",name:"Messages",component:()=>i(()=>import("./communication-DjiRjLK_.js").then(e=>e.M),__vite__mapDeps([16,1,2,8,5,9,17])),meta:{requiresAuth:!0}},{path:"/notifications",name:"Notifications",component:()=>i(()=>import("./communication-DjiRjLK_.js").then(e=>e.N),__vite__mapDeps([16,1,2,8,5,9,17])),meta:{requiresAuth:!0}},{path:"/analytics",name:"Analytics",component:()=>i(()=>import("./admin-p6Pbvhvw.js").then(e=>e.A),__vite__mapDeps([8,1,2,5,9])),meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:()=>i(()=>import("./admin-p6Pbvhvw.js").then(e=>e.S),__vite__mapDeps([8,1,2,5,9])),meta:{requiresAuth:!0}},{path:"/layout-test",name:"LayoutTest",component:()=>i(()=>import("./LayoutTestView-D3b6xpaB.js"),__vite__mapDeps([18,1,2,8,5,9,19])),meta:{requiresAuth:!0}},{path:"/state-test",name:"StatePersistenceTest",component:()=>i(()=>import("./StatePersistenceTestView-DxcF-_3K.js"),__vite__mapDeps([20,3,1,2,4,5,6,7,8,9,10,21])),meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>i(()=>import("./NotFoundView-Cs990e7P.js"),__vite__mapDeps([22,1,2,8,5,9,23]))}]});f.beforeEach(async(e,s,a)=>{const t=P();if(console.log("Router guard:",{to:e.path,from:s.path,initialized:t.initialized,loading:t.loading,isAuthenticated:t.isAuthenticated,isAdmin:t.isAdmin}),!t.initialized&&!t.loading&&(console.log("Initializing auth store from router guard"),await t.initialize()),t.loading){console.log("Auth store is loading, waiting...");let o=0;for(;t.loading&&o<50;)await new Promise(h=>setTimeout(h,100)),o++}const r=e.matched.some(o=>o.meta.requiresAuth),n=e.matched.some(o=>o.meta.requiresGuest);if(console.log("Route requirements:",{requiresAuth:r,requiresGuest:n}),r){if(!t.isAuthenticated){console.log("Route requires auth but user not authenticated, redirecting to login");const o=e.fullPath;o!=="/login"&&t.setRedirectUrl(o),a("/login");return}if(!t.isAdmin){console.log("User is authenticated but not an admin, redirecting to login");const o=e.fullPath;o!=="/login"&&t.setRedirectUrl(o),a("/login");return}}if(n&&t.isAuthenticated&&t.isAdmin){console.log("User already authenticated, redirecting from guest route");const o=t.getAndClearRedirectUrl();a(o);return}if(t.sessionExpired&&e.path!=="/login"){console.log("Session expired, redirecting to login");const o=e.fullPath;t.setRedirectUrl(o),a("/login");return}console.log("All router checks passed, proceeding with navigation"),a()});const X=M({components:K,directives:H,icons:{defaultSet:"mdi",aliases:G,sets:{mdi:x}},defaults:{VCard:{elevation:2,rounded:"lg"},VBtn:{rounded:"lg",style:"text-transform: none; font-weight: 500;"},VTextField:{variant:"outlined",density:"comfortable",rounded:"lg"},VSelect:{variant:"outlined",density:"comfortable",rounded:"lg"},VTextarea:{variant:"outlined",rounded:"lg"},VDataTable:{density:"comfortable"}},theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#6366F1","primary-lighten-1":"#818CF8","primary-darken-1":"#4F46E5",secondary:"#64748B","secondary-lighten-1":"#94A3B8","secondary-darken-1":"#475569",accent:"#06B6D4",error:"#EF4444","error-lighten-1":"#F87171",info:"#3B82F6","info-lighten-1":"#60A5FA",success:"#10B981","success-lighten-1":"#34D399",warning:"#F59E0B","warning-lighten-1":"#FBBF24",background:"#F8FAFC",surface:"#FFFFFF","surface-variant":"#F1F5F9","on-surface":"#1E293B","on-surface-variant":"#64748B"}},dark:{colors:{primary:"#818CF8","primary-lighten-1":"#A5B4FC","primary-darken-1":"#6366F1",secondary:"#94A3B8","secondary-lighten-1":"#CBD5E1","secondary-darken-1":"#64748B",accent:"#22D3EE",error:"#F87171","error-lighten-1":"#FCA5A5",info:"#60A5FA","info-lighten-1":"#93C5FD",success:"#34D399","success-lighten-1":"#6EE7B7",warning:"#FBBF24","warning-lighten-1":"#FCD34D",background:"#0F172A",surface:"#1E293B","surface-variant":"#334155","on-surface":"#F1F5F9","on-surface-variant":"#CBD5E1"}}}}}),Y={position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},l=S(W);l.use(N());l.use(f);l.use(X);l.use(z,Y);l.config.errorHandler=(e,s,a)=>{if(console.error("Global error:",e,a),e&&typeof e=="object"&&"message"in e){const t=e.message.toLowerCase();(t.includes("session")||t.includes("unauthorized")||t.includes("jwt"))&&f.push("/login")}};l.mount("#app");
//# sourceMappingURL=index-DlfZNitN.js.map
