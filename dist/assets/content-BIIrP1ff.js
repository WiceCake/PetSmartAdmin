import{d as Ne,C as Qe,r as f,c as me,z as Ie,o as qe,a as n,b as D,e as x,f as l,g as e,w as t,k as d,t as r,m as Je,F as ye,h as be,x as st,l as De,p as Re,i as Y,G as nt,j as ie,s as Le,u as lt,y as it}from"./vue-vendor-DBH4gaed.js";import{A as ce}from"./services-B6m35qR1.js";import{S as rt,P as ut}from"./components-CxTxZpxR.js";import{d as Ze,f as Me}from"./ui-vendor-D2Zhk6Dz.js";import{_ as Ke}from"./admin-p6Pbvhvw.js";const ct={class:"pets-view"},mt={class:"page-header"},vt={class:"header-content"},pt={class:"header-actions"},_t={key:0,class:"loading-container"},ft={key:1,class:"error-container"},gt={class:"text-body-2 text-on-surface-variant mb-4"},yt={key:2,class:"pets-content"},bt={class:"d-flex align-center"},xt={class:"stats-icon-container me-3"},ht={class:"text-h5 font-weight-bold"},wt={class:"d-flex align-center"},kt={class:"stats-icon-container me-3"},$t={class:"text-h5 font-weight-bold"},Pt={class:"d-flex align-center"},Ct={class:"stats-icon-container me-3"},Vt={class:"text-h5 font-weight-bold"},St={class:"d-flex align-center"},At={class:"stats-icon-container me-3"},Dt={class:"text-h5 font-weight-bold"},Ut={class:"d-flex align-center justify-space-between w-100"},zt={class:"d-flex align-center"},Ft={class:"text-body-2 text-on-surface-variant me-4"},Tt={class:"pets-table-container"},Ot={key:0},It=["colspan"],Mt={key:1},Nt=["colspan"],qt={class:"text-body-2 text-medium-emphasis"},Et=["onClick"],jt={class:"pet-info"},Lt=["title"],Rt={key:0,class:"d-flex align-center"},Wt={class:"text-body-2"},Ht={key:1,class:"text-body-2 text-medium-emphasis"},Bt={key:0,class:"owner-info"},Gt={class:"text-body-2 font-weight-medium"},Qt={class:"text-caption text-medium-emphasis"},Jt={key:1,class:"text-body-2 text-medium-emphasis"},Zt={class:"date-column"},Kt={class:"text-body-2 font-weight-medium"},Yt={class:"text-caption text-medium-emphasis"},Xt={class:"actions-column"},el={class:"desktop-actions d-flex align-center gap-1"},tl={class:"mobile-actions"},ll={class:"custom-pagination-footer"},al={class:"pagination-info"},ol={class:"items-per-page-section"},sl={class:"pagination-text"},nl={class:"text-body-2"},il={class:"pagination-controls"},dl={class:"page-numbers"},rl=Ne({__name:"PetsView",setup(Ee){const L=Qe(),T=f(!0),A=f(null),C=f([]),g=f(0),$=f(1),q=f(10),U=f(""),z=f(""),H=f(""),X=f(""),N=f(!1),m=f(null),v=f(!1),R=f(!1),B=f(null),E=f(!1),j=[{title:"Name",key:"name",sortable:!0,width:"200px",minWidth:"150px"},{title:"Type",key:"type",sortable:!0,width:"120px",minWidth:"100px"},{title:"Gender",key:"gender",sortable:!0,width:"100px",minWidth:"80px"},{title:"Owner",key:"owner",sortable:!1,width:"200px",minWidth:"150px"},{title:"Created",key:"created_at",sortable:!0,width:"120px",minWidth:"100px"},{title:"Actions",key:"actions",sortable:!1,width:"120px",minWidth:"100px"}],W=[{title:"Dog",value:"Dog"},{title:"Cat",value:"Cat"}],V=[{title:"Male",value:"Male"},{title:"Female",value:"Female"}],J=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],Z=me(()=>z.value==="Dog"?g.value:z.value==="Cat"?0:C.value.filter(p=>p.type==="Dog").length),ee=me(()=>z.value==="Cat"?g.value:z.value==="Dog"?0:C.value.filter(p=>p.type==="Cat").length),w=me(()=>C.value.filter(p=>p.is_active!==!1).length),de=Ze(()=>{$.value=1,G()},300),ne=me(()=>Math.ceil(g.value/q.value)),pe=p=>{p>=1&&p<=ne.value&&!T.value&&(console.log("Going to page:",p),$.value=p,G())},S=p=>{console.log("Items per page changed:",p),q.value=p,$.value=1,G()},_e=()=>{if(g.value===0)return"0 of 0";const p=($.value-1)*q.value+1,i=Math.min($.value*q.value,g.value);return`${p}-${i} of ${g.value}`},$e=()=>{const p=ne.value,i=$.value,M=2;if(p<=7)return Array.from({length:p},(le,h)=>h+1);let Q=Math.max(1,i-M),oe=Math.min(p,i+M);return i<=M+1&&(oe=Math.min(p,2*M+2)),i>=p-M&&(Q=Math.max(1,p-2*M-1)),Array.from({length:oe-Q+1},(le,h)=>Q+h)},Ue=(p,i)=>{p.target.closest(".actions-column")||console.log("Row clicked:",i.name)};Ie(U,p=>{p==null&&(U.value=""),de()});const ze=p=>{console.log("Type filter changed:",p),z.value=p||"",$.value=1,G()},Se=()=>{$.value=1,G()},Ae=()=>{$.value=1,G()},Fe=p=>{if(!p)return"Unknown Owner";const i=p.first_name||"",M=p.last_name||"";return`${i} ${M}`.trim()||p.username||"Unknown Owner"},F=p=>{switch(p==null?void 0:p.toLowerCase()){case"dog":return"success";case"cat":return"warning";case"bird":return"info";case"fish":return"cyan";case"rabbit":return"pink";case"hamster":return"amber";case"reptile":return"deep-purple";default:return"grey"}},P=p=>p?Me(new Date(p),"MMM dd, yyyy"):"N/A",ae=p=>p?Me(new Date(p),"HH:mm"):"",G=async()=>{var p;T.value=!0,A.value=null,console.log("Loading pets with params:",{page:$.value,itemsPerPage:q.value,searchQuery:U.value});try{const i=(U.value||"").trim(),M=z.value||"";console.log("API call params:",{page:$.value,itemsPerPage:q.value,searchTerm:i,typeFilter:M});const Q=await ce.getPets($.value,q.value,i,M);if(console.log("API result:",Q),Q.error)throw console.error("API error:",Q.error),Q.error;C.value=Q.data||[],g.value=Q.count||0,console.log("Pets loaded:",{dataLength:((p=Q.data)==null?void 0:p.length)||0,totalCount:Q.count||0,currentPage:$.value,actualData:Q.data})}catch(i){console.error("Failed to load pets:",i),A.value=i instanceof Error?i.message:"Failed to load pets",C.value=[],g.value=0}finally{T.value=!1}},Pe=()=>{m.value=null,N.value=!0},fe=p=>{m.value=p,N.value=!0},te=p=>{B.value=p,R.value=!0},ge=async p=>{v.value=!0,A.value=null;try{if(m.value){const i={name:p.name,type:p.type,gender:p.gender},M=await ce.updatePet(m.value.id,i);if(M.error)throw M.error;L.success("Pet updated successfully")}else{const i={name:p.name,type:p.type,gender:p.gender,user_id:p.user_id},M=await ce.createPet(i);if(M.error)throw M.error;L.success("Pet added successfully")}re(),G()}catch(i){console.error("Failed to save pet:",i),A.value=i instanceof Error?i.message:"Failed to save pet",L.error(A.value)}finally{v.value=!1}},re=()=>{N.value=!1,m.value=null,v.value=!1},he=async()=>{if(B.value){E.value=!0;try{const{error:p}=await ce.deletePet(B.value.id);if(p)throw p;L.success("Pet deleted successfully"),G()}catch(p){console.error("Failed to delete pet:",p);const i=p instanceof Error?p.message:"Failed to delete pet";L.error(i)}finally{E.value=!1,R.value=!1}}},we=()=>{R.value=!1,B.value=null},Te=()=>{U.value="",z.value="",H.value="",X.value="",$.value=1,G()};return qe(()=>{G()}),(p,i)=>{const M=n("v-btn"),Q=n("v-progress-circular"),oe=n("v-card"),le=n("v-icon"),h=n("v-card-text"),o=n("v-col"),s=n("v-row"),a=n("v-text-field"),b=n("v-select"),u=n("v-card-title"),y=n("v-chip"),O=n("v-list-item-title"),I=n("v-list-item"),K=n("v-list"),ke=n("v-menu"),se=n("v-table");return x(),D("div",ct,[l("div",mt,[l("div",vt,[i[11]||(i[11]=l("div",{class:"header-text"},[l("h1",{class:"page-title"},"Pets Management"),l("p",{class:"page-subtitle"},"Manage pet profiles, medical records, and owner relationships")],-1)),l("div",pt,[e(M,{color:"primary",size:"large",variant:"flat","prepend-icon":"mdi-plus",class:"add-pet-btn",onClick:Pe},{default:t(()=>i[10]||(i[10]=[d(" Add New Pet ")])),_:1,__:[10]})])])]),T.value&&C.value.length===0?(x(),D("div",_t,[e(oe,{rounded:"xl",class:"pa-8 text-center"},{default:t(()=>[e(Q,{indeterminate:"",color:"primary",size:"64",class:"mb-4"}),i[12]||(i[12]=l("h3",{class:"text-h6 mb-2"},"Loading Pets",-1)),i[13]||(i[13]=l("p",{class:"text-body-2 text-on-surface-variant"},"Please wait while we fetch the pet data...",-1))]),_:1,__:[12,13]})])):A.value?(x(),D("div",ft,[e(oe,{rounded:"xl",class:"pa-8 text-center"},{default:t(()=>[e(le,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),i[15]||(i[15]=l("h3",{class:"text-h6 mb-2"},"Error Loading Pets",-1)),l("p",gt,r(A.value),1),e(M,{color:"primary",onClick:G},{default:t(()=>i[14]||(i[14]=[d("Try Again")])),_:1,__:[14]})]),_:1,__:[15]})])):(x(),D("div",yt,[e(s,{class:"stats-section mb-6"},{default:t(()=>[e(o,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(oe,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(h,{class:"pa-4"},{default:t(()=>[l("div",bt,[l("div",xt,[e(le,{icon:"mdi-paw",size:"32",color:"primary"})]),l("div",null,[l("div",ht,r(g.value),1),i[16]||(i[16]=l("div",{class:"text-body-2 text-on-surface-variant"},"Total Pets",-1))])])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(oe,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(h,{class:"pa-4"},{default:t(()=>[l("div",wt,[l("div",kt,[e(le,{icon:"mdi-dog",size:"32",color:"success"})]),l("div",null,[l("div",$t,r(Z.value),1),i[17]||(i[17]=l("div",{class:"text-body-2 text-on-surface-variant"},"Dogs",-1))])])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(oe,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(h,{class:"pa-4"},{default:t(()=>[l("div",Pt,[l("div",Ct,[e(le,{icon:"mdi-cat",size:"32",color:"warning"})]),l("div",null,[l("div",Vt,r(ee.value),1),i[18]||(i[18]=l("div",{class:"text-body-2 text-on-surface-variant"},"Cats",-1))])])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(oe,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(h,{class:"pa-4"},{default:t(()=>[l("div",St,[l("div",At,[e(le,{icon:"mdi-heart-pulse",size:"32",color:"info"})]),l("div",null,[l("div",Dt,r(w.value),1),i[19]||(i[19]=l("div",{class:"text-body-2 text-on-surface-variant"},"Active Pets",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),e(oe,{rounded:"xl",class:"filters-card mb-6",elevation:"2"},{default:t(()=>[e(h,{class:"pa-6"},{default:t(()=>[i[22]||(i[22]=l("div",{class:"filters-header mb-4"},[l("h3",{class:"text-h6 font-weight-bold"},"Filter & Search Pets"),l("p",{class:"text-body-2 text-medium-emphasis"},"Find pets by name, type, or owner information")],-1)),e(s,null,{default:t(()=>[e(o,{cols:"12",md:"4"},{default:t(()=>[e(a,{modelValue:U.value,"onUpdate:modelValue":[i[0]||(i[0]=k=>U.value=k),Je(de)],label:"Search pets...",placeholder:"Search by name, type, or owner","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable",clearable:"",class:"search-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(o,{cols:"12",md:"2"},{default:t(()=>[e(b,{modelValue:z.value,"onUpdate:modelValue":[i[1]||(i[1]=k=>z.value=k),ze],label:"Pet Type",items:W,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",md:"2"},{default:t(()=>[e(b,{modelValue:H.value,"onUpdate:modelValue":[i[2]||(i[2]=k=>H.value=k),Se],label:"Gender",items:V,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",md:"2"},{default:t(()=>[e(b,{modelValue:X.value,"onUpdate:modelValue":[i[3]||(i[3]=k=>X.value=k),Ae],label:"Status",items:J,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",md:"2"},{default:t(()=>[e(M,{color:"primary",variant:"outlined",size:"large",block:"",onClick:Te,class:"reset-btn"},{default:t(()=>[e(le,{start:""},{default:t(()=>i[20]||(i[20]=[d("mdi-refresh")])),_:1,__:[20]}),i[21]||(i[21]=d(" Reset "))]),_:1,__:[21]})]),_:1})]),_:1})]),_:1,__:[22]})]),_:1}),e(oe,{rounded:"xl",elevation:"2"},{default:t(()=>[e(u,{class:"pa-6 pb-4"},{default:t(()=>[l("div",Ut,[i[23]||(i[23]=l("h3",{class:"text-h6 font-weight-bold"},"Pet Records",-1)),l("div",zt,[l("span",Ft,r(C.value.length)+" of "+r(g.value)+" pets ",1),e(M,{variant:"text",icon:"mdi-refresh",onClick:G,loading:T.value},null,8,["loading"])])])]),_:1}),l("div",Tt,[e(se,{class:"modern-custom-table",hover:""},{default:t(()=>[l("thead",null,[l("tr",null,[(x(),D(ye,null,be(j,k=>l("th",{key:k.key,style:st({width:k.width,minWidth:k.minWidth})},r(k.title),5)),64))])]),l("tbody",null,[T.value?(x(),D("tr",Ot,[l("td",{colspan:j.length,class:"text-center py-8"},[e(Q,{indeterminate:"",color:"primary",size:"40"}),i[24]||(i[24]=l("div",{class:"mt-2 text-body-2"},"Loading pets...",-1))],8,It)])):C.value.length===0?(x(),D("tr",Mt,[l("td",{colspan:j.length,class:"text-center py-8"},[e(le,{size:"48",color:"grey-lighten-2",class:"mb-2"},{default:t(()=>i[25]||(i[25]=[d("mdi-paw-off")])),_:1,__:[25]}),i[26]||(i[26]=l("div",{class:"text-h6 mb-2"},"No pets found",-1)),l("div",qt,r(U.value||z.value?"Try adjusting your filters":"Start by adding your first pet"),1)],8,Nt)])):(x(!0),D(ye,{key:2},be(C.value,k=>(x(),D("tr",{key:k.id,class:"table-row",onClick:ue=>Ue(ue,k)},[l("td",null,[l("div",jt,[l("div",{class:"font-weight-medium text-body-1 pet-name",title:k.name},r(k.name),9,Lt)])]),l("td",null,[e(y,{color:F(k.type),size:"small",variant:"tonal",class:"font-weight-medium"},{default:t(()=>[d(r(k.type||"Unknown"),1)]),_:2},1032,["color"])]),l("td",null,[k.gender?(x(),D("div",Rt,[e(le,{icon:k.gender==="Male"?"mdi-gender-male":"mdi-gender-female",size:"16",class:"me-1 text-info"},null,8,["icon"]),l("span",Wt,r(k.gender),1)])):(x(),D("span",Ht,"Not specified"))]),l("td",null,[k.owner?(x(),D("div",Bt,[l("div",Gt,r(Fe(k.owner)),1),l("div",Qt," @"+r(k.owner.username||"No username"),1)])):(x(),D("span",Jt,"No owner"))]),l("td",null,[l("div",Zt,[l("div",Kt,r(P(k.created_at)),1),l("div",Yt,r(ae(k.created_at)),1)])]),l("td",null,[l("div",Xt,[l("div",el,[e(M,{icon:"mdi-pencil",variant:"text",size:"small",color:"primary",onClick:De(ue=>fe(k),["stop"])},null,8,["onClick"]),e(M,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:De(ue=>te(k),["stop"])},null,8,["onClick"])]),l("div",tl,[e(ke,null,{activator:t(({props:ue})=>[e(M,Re({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},ue,{onClick:i[4]||(i[4]=De(()=>{},["stop"]))}),null,16)]),default:t(()=>[e(K,null,{default:t(()=>[e(I,{onClick:ue=>fe(k)},{prepend:t(()=>[e(le,null,{default:t(()=>i[27]||(i[27]=[d("mdi-pencil")])),_:1,__:[27]})]),default:t(()=>[e(O,null,{default:t(()=>i[28]||(i[28]=[d("Edit")])),_:1,__:[28]})]),_:2},1032,["onClick"]),e(I,{onClick:ue=>te(k)},{prepend:t(()=>[e(le,null,{default:t(()=>i[29]||(i[29]=[d("mdi-delete")])),_:1,__:[29]})]),default:t(()=>[e(O,null,{default:t(()=>i[30]||(i[30]=[d("Delete")])),_:1,__:[30]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])])])],8,Et))),128))])]),_:1}),l("div",ll,[l("div",al,[l("div",ol,[i[31]||(i[31]=l("span",{class:"text-body-2 me-2"},"Rows per page:",-1)),e(b,{modelValue:q.value,"onUpdate:modelValue":[i[5]||(i[5]=k=>q.value=k),S],items:[5,10,25,50,100],variant:"outlined",density:"compact","hide-details":"",class:"items-per-page-select"},null,8,["modelValue"])]),l("div",sl,[l("span",nl,r(_e()),1)])]),l("div",il,[e(M,{icon:"mdi-chevron-left",variant:"text",size:"small",disabled:$.value<=1||T.value,onClick:i[6]||(i[6]=k=>pe($.value-1)),class:"pagination-btn"},null,8,["disabled"]),l("div",dl,[(x(!0),D(ye,null,be($e(),k=>(x(),Y(M,{key:k,variant:k===$.value?"flat":"text",color:k===$.value?"primary":"default",size:"small",disabled:T.value,onClick:ue=>pe(k),class:"pagination-btn","min-width":"40"},{default:t(()=>[d(r(k),1)]),_:2},1032,["variant","color","disabled","onClick"]))),128))]),e(M,{icon:"mdi-chevron-right",variant:"text",size:"small",disabled:$.value>=ne.value||T.value,onClick:i[7]||(i[7]=k=>pe($.value+1)),class:"pagination-btn"},null,8,["disabled"])])])])]),_:1})])),e(rt,{modelValue:N.value,"onUpdate:modelValue":i[8]||(i[8]=k=>N.value=k),pet:m.value,loading:v.value,onSubmit:ge,onCancel:re},null,8,["modelValue","pet","loading"]),e(ut,{modelValue:R.value,"onUpdate:modelValue":i[9]||(i[9]=k=>R.value=k),pet:B.value,loading:E.value,"show-stats":!0,onConfirm:he,onCancel:we},null,8,["modelValue","pet","loading"])])}}}),ul=Ke(rl,[["__scopeId","data-v-36038cfa"]]),bs=Object.freeze(Object.defineProperty({__proto__:null,default:ul},Symbol.toStringTag,{value:"Module"})),cl={class:"appointments-view"},ml={class:"page-header"},vl={class:"header-content"},pl={class:"header-actions"},_l={key:0,class:"loading-container"},fl={key:1,class:"error-container"},gl={class:"text-body-2 mb-4"},yl={key:2,class:"appointments-content"},bl={class:"d-flex align-center"},xl={class:"stats-icon-container me-3"},hl={class:"text-h5 font-weight-bold"},wl={class:"d-flex align-center"},kl={class:"stats-icon-container me-3"},$l={class:"text-h5 font-weight-bold"},Pl={class:"d-flex align-center"},Cl={class:"stats-icon-container me-3"},Vl={class:"text-h5 font-weight-bold"},Sl={class:"d-flex align-center"},Al={class:"stats-icon-container me-3"},Dl={class:"text-h5 font-weight-bold"},Ul={class:"d-flex align-center justify-space-between w-100"},zl={class:"d-flex align-center"},Fl={class:"text-body-2 text-on-surface-variant me-4"},Tl={class:"appointments-table-container"},Ol={key:0},Il=["colspan"],Ml={key:1},Nl=["colspan"],ql={class:"text-body-2 text-medium-emphasis"},El=["onClick"],jl={class:"pet-info"},Ll=["title"],Rl={class:"text-caption text-medium-emphasis"},Wl={class:"owner-info"},Hl=["title"],Bl={class:"date-column"},Gl={class:"text-body-2 font-weight-medium"},Ql={class:"text-caption text-medium-emphasis"},Jl={class:"actions-column"},Zl={class:"desktop-actions d-none d-sm-flex"},Kl={class:"mobile-actions d-sm-none"},Yl={class:"custom-pagination-footer"},Xl={class:"pagination-info"},ea={class:"items-per-page-section"},ta={class:"pagination-text"},la={class:"text-body-2"},aa={class:"pagination-controls"},oa={class:"page-numbers"},sa={class:"header-content"},na={class:"header-icon-section"},ia={class:"form-section"},da={class:"section-header"},ra={class:"form-section"},ua={class:"section-header"},ca={class:"form-section"},ma={class:"section-header"},va={class:"form-section"},pa={class:"section-header"},_a=Ne({name:"AppointmentsView",__name:"AppointmentsView",setup(Ee){const L=Qe(),T=f(!0),A=f(null),C=f([]),g=f(0),$=f(1),q=f(10),U=f(""),z=f("pending"),H=f(""),X=f(""),N=f(!1),m=f(!1),v=f(null),R=f(!1),B=f(!1),E=f(!1),j=f([]),W=f([]),V=nt({pet_id:"",appointment_date:"",day_slot_id:"",status:"Pending"}),J=[{title:"Pending",value:"Pending"},{title:"Completed",value:"Completed"}],Z=[{title:"Pet",key:"pet",sortable:!1,width:"200px",minWidth:"150px"},{title:"Owner",key:"owner",sortable:!1,width:"200px",minWidth:"150px"},{title:"Date & Time",key:"appointment_date",sortable:!0,width:"160px",minWidth:"140px"},{title:"Status",key:"status",sortable:!1,width:"120px",minWidth:"100px"},{title:"Actions",key:"actions",sortable:!1,width:"120px",minWidth:"100px"}],ee=[{title:"Pending",value:"pending"},{title:"Completed",value:"completed"},{title:"Cancelled",value:"cancelled"},{title:"Expired",value:"expired"}],w=[{title:"Morning (8AM-12PM)",value:"morning"},{title:"Afternoon (12PM-5PM)",value:"afternoon"},{title:"Evening (5PM-8PM)",value:"evening"}],de=me(()=>z.value==="Completed"?g.value:z.value&&z.value!=="Completed"?0:C.value.filter(s=>s.status==="Completed").length),ne=me(()=>z.value==="Pending"?g.value:z.value&&z.value!=="Pending"?0:C.value.filter(s=>s.status==="Pending").length);me(()=>z.value==="Cancelled"?g.value:z.value&&z.value!=="Cancelled"?0:C.value.filter(s=>s.status==="Cancelled").length);const pe=me(()=>{const s=new Date().toISOString().split("T")[0];return H.value===s?g.value:H.value&&H.value!==s?0:C.value.filter(a=>a.appointment_date===s).length});me(()=>U.value||z.value||H.value);const S=Ze(()=>{$.value=1,te()},300),_e=me(()=>Math.ceil(g.value/q.value)),$e=s=>{s>=1&&s<=_e.value&&!T.value&&(console.log("Going to page:",s),$.value=s,te())},Ue=s=>{console.log("Items per page changed:",s),q.value=s,$.value=1,te()},ze=()=>{if(g.value===0)return"0 of 0";const s=($.value-1)*q.value+1,a=Math.min($.value*q.value,g.value);return`${s}-${a} of ${g.value}`},Se=()=>{const s=_e.value,a=$.value,b=2;if(s<=7)return Array.from({length:s},(O,I)=>I+1);let u=Math.max(1,a-b),y=Math.min(s,a+b);return a<=b+1&&(y=Math.min(s,2*b+2)),a>=s-b&&(u=Math.max(1,s-2*b-1)),Array.from({length:y-u+1},(O,I)=>u+I)},Ae=(s,a)=>{s.target.closest(".actions-column")||console.log("Row clicked:",a.id)};Ie(U,s=>{s==null&&(U.value=""),S()}),Ie(()=>V.appointment_date,s=>{s?Q():(W.value=[],V.day_slot_id="")}),Ie(()=>V.pet_id,()=>{Le(()=>{})}),Ie(()=>V.day_slot_id,()=>{Le(()=>{})}),Ie(()=>V.status,()=>{Le(()=>{})});const Fe=s=>{console.log("Status filter changed:",s),z.value=s||"",$.value=1,te()},F=s=>{console.log("Date filter changed:",s),H.value=s||"",$.value=1,te()},P=()=>{$.value=1,te()},ae=s=>{if(!s)return"Unknown Owner";const a=s.first_name||"",b=s.last_name||"";return`${a} ${b}`.trim()||s.username||"Unknown Owner"},G=s=>{switch(s){case"Pending":return"warning";case"Completed":return"success";case"Cancelled":return"error";case"Expired":return"grey";default:return"grey"}},Pe=s=>s?Me(new Date(s),"MMM dd, yyyy"):"N/A",fe=s=>{if(!s)return"N/A";try{if(s.includes(":")){const[a,b]=s.split(":"),u=new Date;return u.setHours(parseInt(a),parseInt(b),0,0),Me(u,"h:mm a")}return Me(new Date(s),"h:mm a")}catch{return s}},te=async()=>{var s,a,b;T.value=!0,A.value=null,console.log("Loading appointments with params:",{page:$.value,itemsPerPage:q.value,searchQuery:U.value,selectedStatus:z.value,selectedDate:H.value});try{const u=z.value||"",y=H.value||"",O=(U.value||"").trim(),I=await ce.getAppointments($.value,q.value,u,y,O);if(I.error)throw I.error;if(C.value=I.data||[],g.value=I.count||0,console.log("Appointments loaded:",{dataLength:((s=I.data)==null?void 0:s.length)||0,totalCount:I.count||0,currentPage:$.value,sampleData:(a=I.data)==null?void 0:a[0]}),I.data&&I.data.length>0)console.log("First appointment structure:",{appointment:I.data[0],pet:I.data[0].pet,user:I.data[0].user,petName:(b=I.data[0].pet)==null?void 0:b.name,ownerName:ae(I.data[0].user)});else{console.log("No appointments found, adding sample data for testing");const K=[{id:"sample-1",appointment_date:"2024-01-15",appointment_time:"10:00:00",status:"Completed",pet:{name:"Buddy",type:"Dog"},user:{first_name:"John",last_name:"Doe",username:"johndoe"},created_at:new Date().toISOString(),updated_at:new Date().toISOString(),user_id:"sample-user-1",pet_id:"sample-pet-1",day_slot_id:null},{id:"sample-2",appointment_date:"2024-01-16",appointment_time:"14:30:00",status:"Pending",pet:{name:"Whiskers",type:"Cat"},user:{first_name:"Jane",last_name:"Smith",username:"janesmith"},created_at:new Date().toISOString(),updated_at:new Date().toISOString(),user_id:"sample-user-2",pet_id:"sample-pet-2",day_slot_id:null},{id:"sample-3",appointment_date:"2024-01-17",appointment_time:"09:15:00",status:"Cancelled",pet:{name:"Max",type:"Dog"},user:{first_name:"Bob",last_name:"Johnson",username:"bobjohnson"},created_at:new Date().toISOString(),updated_at:new Date().toISOString(),user_id:"sample-user-3",pet_id:"sample-pet-3",day_slot_id:null}];C.value=K,g.value=K.length,console.log("Sample appointments added:",K)}}catch(u){console.error("Failed to load appointments:",u),A.value=u instanceof Error?u.message:"Failed to load appointments",C.value=[],g.value=0}finally{T.value=!1}},ge=s=>s==="Pending",re=s=>s==="Pending",he=async s=>{var u;console.log("Mark as completed clicked:",s);const a=((u=s.pet)==null?void 0:u.name)||"Unknown Pet";ae(s.user);const b=C.value.findIndex(y=>y.id===s.id);b!==-1&&(C.value[b].updating=!0);try{const y=await ce.updateAppointmentStatus(s.id,"Completed");if(y.error)throw y.error;b!==-1&&(C.value[b].status="Completed",C.value[b].updating=!1),L.success(`Appointment completed for ${a}`),console.log(`Appointment ${s.id} marked as completed`),await te()}catch(y){console.error("Failed to mark appointment as completed:",y),L.error("Failed to update appointment status"),b!==-1&&(C.value[b].updating=!1)}},we=async s=>{var u;console.log("Mark as cancelled clicked:",s);const a=((u=s.pet)==null?void 0:u.name)||"Unknown Pet";ae(s.user);const b=C.value.findIndex(y=>y.id===s.id);b!==-1&&(C.value[b].updating=!0);try{const y=await ce.updateAppointmentStatus(s.id,"Cancelled");if(y.error)throw y.error;b!==-1&&(C.value[b].status="Cancelled",C.value[b].updating=!1),L.warning(`Appointment cancelled for ${a}`),console.log(`Appointment ${s.id} marked as cancelled`),await te()}catch(y){console.error("Failed to mark appointment as cancelled:",y),L.error("Failed to update appointment status"),b!==-1&&(C.value[b].updating=!1)}},Te=()=>{U.value="",z.value="pending",H.value="",X.value="",$.value=1,te()},p=s=>{switch(s){case"Pending":return"mdi-clock-outline";case"Completed":return"mdi-check-all";case"Cancelled":return"mdi-cancel";case"Expired":return"mdi-timer-off";default:return"mdi-help-circle-outline"}},i=s=>{switch(s){case"Pending":return"Pending";case"Completed":return"Completed";case"Cancelled":return"Cancelled";case"Expired":return"Expired";default:return"Unknown"}},M=async()=>{B.value=!0;try{const s=await ce.getPets(1,100);if(s.error)throw s.error;j.value=(s.data||[]).map(a=>{var b,u;return{id:a.id,display_name:`${a.name} (${a.type||"Unknown"}) - Owner: ${((b=a.owner)==null?void 0:b.first_name)||""} ${((u=a.owner)==null?void 0:u.last_name)||""}`.trim()}})}catch(s){console.error("Failed to load pets:",s),L.error("Failed to load pets"),j.value=[]}finally{B.value=!1}},Q=async()=>{if(!V.appointment_date){W.value=[];return}E.value=!0;try{const s=await ce.getAvailableTimeSlots(V.appointment_date);if(s.error)throw s.error;W.value=(s.data||[]).map(a=>({id:a.id,display_text:`${fe(a.time_slot)} - ${fe(a.end_time)} (${a.max_capacity} spots available)`,time_slot:a.time_slot,end_time:a.end_time,max_capacity:a.max_capacity})),V.day_slot_id&&!W.value.find(a=>a.id===V.day_slot_id)&&(V.day_slot_id="")}catch(s){console.error("Failed to load time slots:",s),L.error("Failed to load available time slots"),W.value=[]}finally{E.value=!1}},oe=()=>{N.value=!0,M()},le=()=>{N.value=!1,h()},h=()=>{V.pet_id="",V.appointment_date="",V.day_slot_id="",V.status="Pending",m.value=!1,W.value=[],Le(()=>{v.value&&v.value.resetValidation()})},o=async()=>{var s;if(m.value){R.value=!0;try{if(!j.value.find(se=>se.id===V.pet_id))throw new Error("Selected pet not found");const u=(s=(await ce.getPets(1,100)).data)==null?void 0:s.find(se=>se.id===V.pet_id);if(!(u!=null&&u.user_id))throw new Error("Pet owner not found");const y=W.value.find(se=>se.id===V.day_slot_id);if(!y)throw new Error("Selected time slot not found");const O={pet_id:V.pet_id,user_id:u.user_id,appointment_date:V.appointment_date,appointment_time:y.time_slot,day_slot_id:V.day_slot_id,status:V.status};console.log("Creating appointment with time slot:",O);const I=await ce.createAppointment(O);if(I.error)throw I.error;const K=u.name||"Unknown Pet",ke=y.display_text;L.success(`Appointment created successfully for ${K} at ${ke}`),console.log("Appointment created successfully:",I.data),le(),await te()}catch(a){console.error("Failed to create appointment:",a),L.error("Failed to create appointment")}finally{R.value=!1}}};return qe(()=>{te()}),(s,a)=>{const b=n("v-btn"),u=n("v-progress-circular"),y=n("v-card"),O=n("v-icon"),I=n("v-card-text"),K=n("v-col"),ke=n("v-row"),se=n("v-text-field"),k=n("v-select"),ue=n("v-card-title"),Oe=n("v-chip"),We=n("v-tooltip"),Ce=n("v-list-item-title"),xe=n("v-list-item"),Ye=n("v-list"),Xe=n("v-menu"),et=n("v-table"),He=n("v-avatar"),Be=n("v-divider"),tt=n("v-form"),Ge=n("v-spacer"),c=n("v-card-actions"),ve=n("v-dialog");return x(),D("div",cl,[l("div",ml,[l("div",vl,[a[15]||(a[15]=l("div",{class:"header-text"},[l("h1",{class:"page-title"},"Appointments Management"),l("p",{class:"page-subtitle"},"Schedule, manage, and track all pet appointments and veterinary visits")],-1)),l("div",pl,[e(b,{color:"primary",size:"large",variant:"flat","prepend-icon":"mdi-plus",class:"add-appointment-btn",onClick:oe},{default:t(()=>a[14]||(a[14]=[d(" Schedule Appointment ")])),_:1,__:[14]})])])]),T.value&&C.value.length===0?(x(),D("div",_l,[e(y,{class:"pa-8 text-center",rounded:"lg"},{default:t(()=>[e(u,{indeterminate:"",color:"primary",size:"60",width:"4"}),a[16]||(a[16]=l("div",{class:"text-h6 mt-4 mb-2"},"Loading appointments...",-1)),a[17]||(a[17]=l("div",{class:"text-body-2 text-medium-emphasis"},"Please wait while we fetch the data",-1))]),_:1,__:[16,17]})])):A.value?(x(),D("div",fl,[e(y,{class:"pa-8 text-center",rounded:"lg",color:"error",variant:"tonal"},{default:t(()=>[e(O,{size:"60",color:"error",class:"mb-4"},{default:t(()=>a[18]||(a[18]=[d("mdi-alert-circle")])),_:1,__:[18]}),a[21]||(a[21]=l("div",{class:"text-h6 mb-2"},"Error Loading Appointments",-1)),l("div",gl,r(A.value),1),e(b,{color:"error",onClick:te},{default:t(()=>[e(O,{start:""},{default:t(()=>a[19]||(a[19]=[d("mdi-refresh")])),_:1,__:[19]}),a[20]||(a[20]=d(" Try Again "))]),_:1,__:[20]})]),_:1,__:[21]})])):(x(),D("div",yl,[e(ke,{class:"stats-section mb-6"},{default:t(()=>[e(K,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(y,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(I,{class:"pa-4"},{default:t(()=>[l("div",bl,[l("div",xl,[e(O,{icon:"mdi-calendar-clock",size:"32",color:"primary"})]),l("div",null,[l("div",hl,r(g.value),1),a[22]||(a[22]=l("div",{class:"text-body-2 text-on-surface-variant"},"Total Appointments",-1))])])]),_:1})]),_:1})]),_:1}),e(K,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(y,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(I,{class:"pa-4"},{default:t(()=>[l("div",wl,[l("div",kl,[e(O,{icon:"mdi-calendar-today",size:"32",color:"info"})]),l("div",null,[l("div",$l,r(pe.value),1),a[23]||(a[23]=l("div",{class:"text-body-2 text-on-surface-variant"},"Today's Appointments",-1))])])]),_:1})]),_:1})]),_:1}),e(K,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(y,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(I,{class:"pa-4"},{default:t(()=>[l("div",Pl,[l("div",Cl,[e(O,{icon:"mdi-clock-outline",size:"32",color:"warning"})]),l("div",null,[l("div",Vl,r(ne.value),1),a[24]||(a[24]=l("div",{class:"text-body-2 text-on-surface-variant"},"Pending",-1))])])]),_:1})]),_:1})]),_:1}),e(K,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(y,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(I,{class:"pa-4"},{default:t(()=>[l("div",Sl,[l("div",Al,[e(O,{icon:"mdi-check-all",size:"32",color:"success"})]),l("div",null,[l("div",Dl,r(de.value),1),a[25]||(a[25]=l("div",{class:"text-body-2 text-on-surface-variant"},"Completed",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{rounded:"xl",class:"filters-card mb-6",elevation:"2"},{default:t(()=>[e(I,{class:"pa-6"},{default:t(()=>[a[28]||(a[28]=l("div",{class:"filters-header mb-4"},[l("h3",{class:"text-h6 font-weight-bold"},"Filter & Search Appointments"),l("p",{class:"text-body-2 text-medium-emphasis"},"Find appointments by pet, owner, status, or date")],-1)),e(ke,null,{default:t(()=>[e(K,{cols:"12",md:"4"},{default:t(()=>[e(se,{modelValue:U.value,"onUpdate:modelValue":[a[0]||(a[0]=_=>U.value=_),Je(S)],label:"Search appointments...",placeholder:"Search by pet name, owner, or status","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable",clearable:"",class:"search-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(K,{cols:"12",md:"2"},{default:t(()=>[e(k,{modelValue:z.value,"onUpdate:modelValue":[a[1]||(a[1]=_=>z.value=_),Fe],label:"Status",items:ee,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(K,{cols:"12",md:"2"},{default:t(()=>[e(se,{modelValue:H.value,"onUpdate:modelValue":[a[2]||(a[2]=_=>H.value=_),F],label:"Date",type:"date",variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(K,{cols:"12",md:"2"},{default:t(()=>[e(k,{modelValue:X.value,"onUpdate:modelValue":[a[3]||(a[3]=_=>X.value=_),P],label:"Time Range",items:w,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(K,{cols:"12",md:"2"},{default:t(()=>[e(b,{color:"primary",variant:"outlined",size:"large",block:"",onClick:Te,class:"reset-btn"},{default:t(()=>[e(O,{start:""},{default:t(()=>a[26]||(a[26]=[d("mdi-refresh")])),_:1,__:[26]}),a[27]||(a[27]=d(" Reset "))]),_:1,__:[27]})]),_:1})]),_:1})]),_:1,__:[28]})]),_:1}),e(y,{rounded:"xl",elevation:"2"},{default:t(()=>[e(ue,{class:"pa-6 pb-4"},{default:t(()=>[l("div",Ul,[a[29]||(a[29]=l("h3",{class:"text-h6 font-weight-bold"},"Appointment Records",-1)),l("div",zl,[l("span",Fl,r(C.value.length)+" of "+r(g.value)+" appointments ",1),e(b,{variant:"text",icon:"mdi-refresh",onClick:te,loading:T.value},null,8,["loading"])])])]),_:1}),l("div",Tl,[e(et,{class:"modern-custom-table",hover:""},{default:t(()=>[l("thead",null,[l("tr",null,[(x(),D(ye,null,be(Z,_=>l("th",{key:_.key,style:st({width:_.width,minWidth:_.minWidth})},r(_.title),5)),64))])]),l("tbody",null,[T.value?(x(),D("tr",Ol,[l("td",{colspan:Z.length,class:"text-center py-8"},[e(u,{indeterminate:"",color:"primary",size:"40"}),a[30]||(a[30]=l("div",{class:"mt-2 text-body-2"},"Loading appointments...",-1))],8,Il)])):C.value.length===0?(x(),D("tr",Ml,[l("td",{colspan:Z.length,class:"text-center py-8"},[e(O,{size:"48",color:"grey-lighten-2",class:"mb-2"},{default:t(()=>a[31]||(a[31]=[d("mdi-calendar-off")])),_:1,__:[31]}),a[32]||(a[32]=l("div",{class:"text-h6 mb-2"},"No appointments found",-1)),l("div",ql,r(U.value||z.value||H.value?"Try adjusting your filters":"Start by scheduling your first appointment"),1)],8,Nl)])):(x(!0),D(ye,{key:2},be(C.value,_=>{var je,at,ot;return x(),D("tr",{key:_.id,class:"table-row",onClick:Ve=>Ae(Ve,_)},[l("td",null,[l("div",jl,[l("div",{class:"font-weight-medium text-body-1 pet-name",title:((je=_.pet)==null?void 0:je.name)||"Unknown Pet"},r(((at=_.pet)==null?void 0:at.name)||"Unknown Pet"),9,Ll),l("div",Rl,r(((ot=_.pet)==null?void 0:ot.type)||"Unknown Type"),1)])]),l("td",null,[l("div",Wl,[l("div",{class:"text-body-2 font-weight-medium owner-name",title:ae(_.user)},r(ae(_.user)),9,Hl)])]),l("td",null,[l("div",Bl,[l("div",Gl,r(Pe(_.appointment_date)),1),l("div",Ql,r(fe(_.appointment_time)),1)])]),l("td",null,[e(Oe,{color:G(_.status),size:"small",variant:"tonal",class:"font-weight-medium"},{default:t(()=>[e(O,{icon:p(_.status),size:"16",class:"me-1"},null,8,["icon"]),d(" "+r(i(_.status)),1)]),_:2},1032,["color"])]),l("td",null,[l("div",Jl,[l("div",Zl,[ge(_.status)?(x(),Y(We,{key:0,text:"Mark as completed",location:"top"},{activator:t(({props:Ve})=>[e(b,Re({icon:"mdi-check-circle",variant:"text",size:"small",color:"success"},{ref_for:!0},Ve,{loading:_.updating,onClick:De(dt=>he(_),["stop"])}),null,16,["loading","onClick"])]),_:2},1024)):ie("",!0),re(_.status)?(x(),Y(We,{key:1,text:"Mark as cancelled",location:"top"},{activator:t(({props:Ve})=>[e(b,Re({icon:"mdi-cancel",variant:"text",size:"small",color:"warning"},{ref_for:!0},Ve,{loading:_.updating,onClick:De(dt=>we(_),["stop"])}),null,16,["loading","onClick"])]),_:2},1024)):ie("",!0)]),l("div",Kl,[ge(_.status)||re(_.status)?(x(),Y(Xe,{key:0},{activator:t(({props:Ve})=>[e(b,Re({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},Ve,{onClick:a[4]||(a[4]=De(()=>{},["stop"]))}),null,16)]),default:t(()=>[e(Ye,null,{default:t(()=>[ge(_.status)?(x(),Y(xe,{key:0,onClick:Ve=>he(_),disabled:_.updating},{prepend:t(()=>[e(O,null,{default:t(()=>a[33]||(a[33]=[d("mdi-check-circle")])),_:1,__:[33]})]),default:t(()=>[e(Ce,null,{default:t(()=>a[34]||(a[34]=[d("Mark as Completed")])),_:1,__:[34]})]),_:2},1032,["onClick","disabled"])):ie("",!0),re(_.status)?(x(),Y(xe,{key:1,onClick:Ve=>we(_),disabled:_.updating},{prepend:t(()=>[e(O,null,{default:t(()=>a[35]||(a[35]=[d("mdi-cancel")])),_:1,__:[35]})]),default:t(()=>[e(Ce,null,{default:t(()=>a[36]||(a[36]=[d("Mark as Cancelled")])),_:1,__:[36]})]),_:2},1032,["onClick","disabled"])):ie("",!0)]),_:2},1024)]),_:2},1024)):ie("",!0)])])])],8,El)}),128))])]),_:1}),l("div",Yl,[l("div",Xl,[l("div",ea,[a[37]||(a[37]=l("span",{class:"text-body-2 me-2"},"Rows per page:",-1)),e(k,{modelValue:q.value,"onUpdate:modelValue":[a[5]||(a[5]=_=>q.value=_),Ue],items:[5,10,25,50,100],variant:"outlined",density:"compact","hide-details":"",class:"items-per-page-select"},null,8,["modelValue"])]),l("div",ta,[l("span",la,r(ze()),1)])]),l("div",aa,[e(b,{icon:"mdi-chevron-left",variant:"text",size:"small",disabled:$.value<=1||T.value,onClick:a[6]||(a[6]=_=>$e($.value-1)),class:"pagination-btn"},null,8,["disabled"]),l("div",oa,[(x(!0),D(ye,null,be(Se(),_=>(x(),Y(b,{key:_,variant:_===$.value?"flat":"text",color:_===$.value?"primary":"default",size:"small",disabled:T.value,onClick:je=>$e(_),class:"pagination-btn","min-width":"40"},{default:t(()=>[d(r(_),1)]),_:2},1032,["variant","color","disabled","onClick"]))),128))]),e(b,{icon:"mdi-chevron-right",variant:"text",size:"small",disabled:$.value>=_e.value||T.value,onClick:a[7]||(a[7]=_=>$e($.value+1)),class:"pagination-btn"},null,8,["disabled"])])])])]),_:1})])),e(ve,{modelValue:N.value,"onUpdate:modelValue":a[13]||(a[13]=_=>N.value=_),"max-width":"700px",persistent:""},{default:t(()=>[e(y,{class:"appointment-form-dialog elevation-12"},{default:t(()=>[e(ue,{class:"dialog-header pa-0"},{default:t(()=>[l("div",sa,[l("div",na,[e(He,{size:"48",color:"primary",variant:"tonal"},{default:t(()=>[e(O,{size:"24"},{default:t(()=>a[38]||(a[38]=[d("mdi-calendar-plus")])),_:1,__:[38]})]),_:1}),a[39]||(a[39]=l("div",{class:"header-text"},[l("h2",{class:"header-title"},"Create New Appointment"),l("p",{class:"header-subtitle"},"Schedule a new appointment for your pet")],-1))]),e(b,{icon:"mdi-close",variant:"text",size:"small",class:"close-btn",onClick:le})])]),_:1}),e(Be,{class:"header-divider"}),e(I,{class:"form-content"},{default:t(()=>[e(tt,{ref_key:"appointmentFormRef",ref:v,modelValue:m.value,"onUpdate:modelValue":a[12]||(a[12]=_=>m.value=_),onSubmit:De(o,["prevent"])},{default:t(()=>[l("div",ia,[l("div",da,[e(O,{class:"section-icon",color:"primary"},{default:t(()=>a[40]||(a[40]=[d("mdi-dog")])),_:1,__:[40]}),a[41]||(a[41]=l("div",{class:"section-info"},[l("h3",{class:"section-title"},"Pet Information"),l("p",{class:"section-description"},"Select the pet for this appointment")],-1))]),e(k,{modelValue:V.pet_id,"onUpdate:modelValue":a[8]||(a[8]=_=>V.pet_id=_),items:j.value,"item-title":"display_name","item-value":"id",label:"Select Pet",variant:"outlined",rules:[_=>!!_||"Pet is required"],loading:B.value,"prepend-inner-icon":"mdi-dog",class:"enhanced-select",clearable:"",required:""},{"no-data":t(()=>[e(xe,null,{default:t(()=>[e(Ce,{class:"text-center text-grey"},{default:t(()=>a[42]||(a[42]=[d(" No pets available ")])),_:1,__:[42]})]),_:1})]),_:1},8,["modelValue","items","rules","loading"])]),l("div",ra,[l("div",ua,[e(O,{class:"section-icon",color:"primary"},{default:t(()=>a[43]||(a[43]=[d("mdi-calendar")])),_:1,__:[43]}),a[44]||(a[44]=l("div",{class:"section-info"},[l("h3",{class:"section-title"},"Appointment Date"),l("p",{class:"section-description"},"Choose your preferred appointment date")],-1))]),e(se,{modelValue:V.appointment_date,"onUpdate:modelValue":[a[9]||(a[9]=_=>V.appointment_date=_),Q],label:"Appointment Date",type:"date",variant:"outlined",rules:[_=>!!_||"Date is required"],"prepend-inner-icon":"mdi-calendar",class:"enhanced-date-field",clearable:"",required:""},null,8,["modelValue","rules"])]),l("div",ca,[l("div",ma,[e(O,{class:"section-icon",color:"primary"},{default:t(()=>a[45]||(a[45]=[d("mdi-clock-outline")])),_:1,__:[45]}),a[46]||(a[46]=l("div",{class:"section-info"},[l("h3",{class:"section-title"},"Available Time Slots"),l("p",{class:"section-description"},"Select from available appointment times")],-1))]),e(k,{modelValue:V.day_slot_id,"onUpdate:modelValue":a[10]||(a[10]=_=>V.day_slot_id=_),items:W.value,"item-title":"display_text","item-value":"id",label:"Select Time Slot",variant:"outlined",rules:[_=>!!_||"Time slot is required"],loading:E.value,disabled:!V.appointment_date,"prepend-inner-icon":"mdi-clock-outline",class:"enhanced-select",clearable:"",required:""},{"no-data":t(()=>[e(xe,null,{default:t(()=>[e(Ce,{class:"text-center text-grey"},{default:t(()=>[d(r(V.appointment_date?"No available time slots for this date":"Please select a date first"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","rules","loading","disabled"])]),l("div",va,[l("div",pa,[e(O,{class:"section-icon",color:"primary"},{default:t(()=>a[47]||(a[47]=[d("mdi-check-circle")])),_:1,__:[47]}),a[48]||(a[48]=l("div",{class:"section-info"},[l("h3",{class:"section-title"},"Initial Status"),l("p",{class:"section-description"},"Set the initial appointment status")],-1))]),e(k,{modelValue:V.status,"onUpdate:modelValue":a[11]||(a[11]=_=>V.status=_),items:J,label:"Initial Status",variant:"outlined",rules:[_=>!!_||"Status is required"],"prepend-inner-icon":"mdi-check-circle",class:"enhanced-select",clearable:"",required:""},null,8,["modelValue","rules"])])]),_:1},8,["modelValue"])]),_:1}),e(Be),e(c,{class:"form-actions"},{default:t(()=>[e(Ge),e(b,{variant:"text",size:"large",onClick:le,disabled:R.value,class:"cancel-btn"},{default:t(()=>a[49]||(a[49]=[d(" Cancel ")])),_:1,__:[49]},8,["disabled"]),e(b,{color:"primary",variant:"flat",size:"large",onClick:o,loading:R.value,disabled:!m.value,class:"create-btn"},{default:t(()=>[e(O,{start:""},{default:t(()=>a[50]||(a[50]=[d("mdi-calendar-plus")])),_:1,__:[50]}),a[51]||(a[51]=d(" Create Appointment "))]),_:1,__:[51]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),fa=Ke(_a,[["__scopeId","data-v-02da8d95"]]),xs=Object.freeze(Object.defineProperty({__proto__:null,default:fa},Symbol.toStringTag,{value:"Module"})),ga={class:"products-view"},ya={class:"page-header"},ba={class:"header-content"},xa={class:"header-actions"},ha={class:"d-flex align-center"},wa={class:"stats-icon-container me-3"},ka={class:"text-h5 font-weight-bold"},$a={class:"d-flex align-center"},Pa={class:"stats-icon-container me-3"},Ca={class:"text-h5 font-weight-bold"},Va={class:"d-flex align-center"},Sa={class:"stats-icon-container me-3"},Aa={class:"text-h5 font-weight-bold"},Da={class:"d-flex align-center"},Ua={class:"stats-icon-container me-3"},za={class:"text-h5 font-weight-bold"},Fa={class:"d-flex align-center justify-space-between w-100"},Ta={class:"text-body-2 text-medium-emphasis"},Oa={class:"d-flex align-center view-toggle-buttons"},Ia={key:0,class:"table-container"},Ma={class:"d-flex align-center py-2"},Na={class:"font-weight-bold text-truncate",style:{"max-width":"200px"}},qa={class:"text-caption text-medium-emphasis text-truncate",style:{"max-width":"200px"}},Ea={class:"font-weight-bold text-primary"},ja={key:0,class:"text-caption text-decoration-line-through text-medium-emphasis"},La={key:1,class:"text-medium-emphasis"},Ra={class:"text-body-2"},Wa={class:"d-flex align-center gap-1"},Ha={key:1,class:"grid-container pa-6"},Ba={class:"d-flex justify-space-between pa-3"},Ga={class:"text-h6 font-weight-bold mb-2 text-truncate"},Qa={class:"text-body-2 text-medium-emphasis mb-3 line-clamp-2"},Ja={class:"d-flex align-center justify-space-between mb-3"},Za={class:"text-h6 font-weight-bold text-primary"},Ka={key:0,class:"text-decoration-line-through text-medium-emphasis ml-2"},Ya={class:"d-flex align-center justify-space-between mb-3"},Xa={class:"text-caption text-medium-emphasis"},eo={class:"text-caption text-medium-emphasis"},to={key:2,class:"pagination-footer"},lo={class:"footer-content"},ao={class:"footer-info"},oo={class:"results-summary"},so={class:"text-body-2 text-medium-emphasis"},no={class:"items-per-page"},io={class:"pagination-controls"},ro={key:0,class:"d-flex justify-center py-12"},uo={class:"text-center"},co={class:"text-body-1 text-medium-emphasis mb-6 mx-auto",style:{"max-width":"400px"}},mo={class:"header-content"},vo={class:"header-icon-section"},po={class:"header-text"},_o={class:"header-title"},fo={class:"header-subtitle"},go={class:"form-section"},yo={class:"section-header"},bo={class:"form-section"},xo={class:"section-header"},ho={class:"form-section"},wo={class:"section-header"},ko={class:"image-upload-section mb-6"},$o={class:"upload-section-title"},Po={class:"thumbnail-upload-area"},Co={key:0,class:"thumbnail-preview"},Vo={class:"image-upload-section"},So={class:"upload-section-title"},Ao={class:"multiple-upload-area"},Do={key:0,class:"images-preview-grid"},Uo={key:1,class:"existing-images-section"},zo={class:"images-preview-grid"},Fo={key:0,class:"upload-progress"},To={class:"d-flex align-center"},Oo={class:"text-body-1 mb-4"},Io=Ne({__name:"ProductsView",setup(Ee){lt();const L=Qe(),T=f([]),A=f(!1),C=f(1),g=f(12),$=f(0),q=f("table"),U=f(""),z=f(""),H=f(""),X=f(""),N=f(!1),m=f(!1),v=f(!1),R=f(null),B=f(null),E=f(!1),j=f(null),W=f(!1),V=f(!1),J=f(null),Z=f([]),ee=f(!1),w=nt({title:"",description:"",price:0,quantity:0,thumbnail:null,productImages:[],existingImages:[]}),de=[{title:"Dog Food",value:"dog_food"},{title:"Cat Food",value:"cat_food"},{title:"Toys",value:"toys"},{title:"Accessories",value:"accessories"},{title:"Health & Care",value:"health_care"},{title:"Treats",value:"treats"}],ne=[{title:"In Stock",value:"in_stock"},{title:"Low Stock",value:"low_stock"},{title:"Out of Stock",value:"out_of_stock"},{title:"On Sale",value:"on_sale"}],pe=[{title:"Under ₱100",value:"0-100"},{title:"₱100 - ₱500",value:"100-500"},{title:"₱500 - ₱1,000",value:"500-1000"},{title:"₱1,000 - ₱2,000",value:"1000-2000"},{title:"Over ₱2,000",value:"2000+"}],S=[{title:"12",value:12},{title:"24",value:24},{title:"48",value:48},{title:"96",value:96}],_e=[{title:"Product",key:"title",sortable:!1},{title:"Price",key:"price",sortable:!0},{title:"Stock",key:"quantity",sortable:!0},{title:"Sale",key:"is_on_sale",sortable:!1},{title:"Created",key:"created_at",sortable:!0},{title:"Actions",key:"actions",sortable:!1,width:"100px"}],$e=me(()=>T.value.filter(h=>h.quantity>0).length),Ue=me(()=>T.value.filter(h=>h.quantity>0&&h.quantity<=10).length),ze=me(()=>T.value.reduce((h,o)=>h+Number(o.price)*o.quantity,0)),Se=h=>Me(new Date(h),"MMM dd, yyyy"),Ae=h=>h===0?"error":h<=10?"warning":"success",Fe=h=>h===0?"mdi-alert-circle":h<=10?"mdi-alert":"mdi-check-circle",F=async()=>{A.value=!0;try{const h=await ce.getProducts(C.value,g.value,U.value);if(h.error)throw h.error;T.value=h.data||[],$.value=h.count||0}catch(h){L.error("Failed to load products"),console.error("Error loading products:",h)}finally{A.value=!1}},P=Ze(()=>{C.value=1,F()},500),ae=()=>{C.value=1,F()},G=()=>{C.value=1,F()},Pe=()=>{C.value=1,F()},fe=()=>{U.value="",z.value="",H.value="",X.value="",C.value=1,F()},te=()=>{C.value=1,F()},ge=h=>{v.value=!0,w.title=h.title,w.description=h.description||"",w.price=Number(h.price),w.quantity=h.quantity,w.existingImages=h.images||[];const o=w.existingImages.find(s=>s.is_thumbnail);o&&(J.value=o.image_url),B.value=h,N.value=!0},re=()=>{N.value=!1,v.value=!1,B.value=null,he()},he=()=>{w.title="",w.description="",w.price=0,w.quantity=0,w.thumbnail=null,w.productImages=[],w.existingImages=[],J.value=null,Z.value=[],Le(()=>{j.value&&j.value.resetValidation()})},we=async()=>{if(E.value){W.value=!0,ee.value=!0;try{const h={title:w.title,description:w.description,price:Number(w.price),quantity:Number(w.quantity),is_on_sale:!1,discount_percentage:null,original_price:null,sale_start_date:null,sale_end_date:null};let o;if(v.value&&B.value?(o=await ce.updateProductWithImages(B.value.id,h,w.thumbnail,w.productImages,w.existingImages),L.success("Product updated successfully")):(o=await ce.createProductWithImages(h,w.thumbnail,w.productImages),L.success("Product created successfully")),o.error)throw o.error;re(),await F()}catch(h){console.error("Failed to save product:",h),L.error("Failed to save product")}finally{W.value=!1,ee.value=!1}}},Te=h=>{var s;const o=(s=h.target)==null?void 0:s.files;if(o&&o.length>0){const a=o[0];if(a){const b=new FileReader;b.onload=u=>{var y;J.value=(y=u.target)==null?void 0:y.result},b.readAsDataURL(a)}}},p=()=>{w.thumbnail=null,J.value=null},i=h=>{var s;const o=(s=h.target)==null?void 0:s.files;if(o){const a=Array.from(o);Z.value=[],a.forEach(b=>{const u=new FileReader;u.onload=y=>{var O;Z.value.push((O=y.target)==null?void 0:O.result)},u.readAsDataURL(b)})}},M=h=>{Z.value.splice(h,1),w.productImages&&w.productImages.length>h&&w.productImages.splice(h,1)},Q=h=>{w.existingImages.splice(h,1)},oe=h=>{R.value=h,m.value=!0},le=async()=>{if(R.value){V.value=!0;try{const h=await ce.deleteProduct(R.value.id);if(h.error)throw h.error;L.success("Product deleted successfully"),m.value=!1,R.value=null,F()}catch(h){L.error("Failed to delete product"),console.error("Error deleting product:",h)}finally{V.value=!1}}};return qe(()=>{F()}),(h,o)=>{const s=n("v-btn"),a=n("v-icon"),b=n("v-card-text"),u=n("v-card"),y=n("v-col"),O=n("v-row"),I=n("v-text-field"),K=n("v-select"),ke=n("v-card-title"),se=n("v-divider"),k=n("v-img"),ue=n("v-avatar"),Oe=n("v-chip"),We=n("v-data-table"),Ce=n("v-spacer"),xe=n("v-card-actions"),Ye=n("v-pagination"),Xe=n("v-progress-circular"),et=n("v-textarea"),He=n("v-file-input"),Be=n("v-form"),tt=n("v-progress-linear"),Ge=n("v-dialog");return x(),D("div",ga,[l("div",ya,[l("div",ba,[o[21]||(o[21]=l("div",{class:"header-text"},[l("h1",{class:"page-title"},"Product Management"),l("p",{class:"page-subtitle"},"Manage your pet store's product catalog, inventory, and pricing")],-1)),l("div",xa,[e(s,{color:"primary",size:"large",variant:"flat","prepend-icon":"mdi-plus",class:"add-product-btn",onClick:o[0]||(o[0]=c=>N.value=!0)},{default:t(()=>o[20]||(o[20]=[d(" Add New Product ")])),_:1,__:[20]})])])]),e(O,{class:"stats-section mb-6"},{default:t(()=>[e(y,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(u,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(b,{class:"pa-4"},{default:t(()=>[l("div",ha,[l("div",wa,[e(a,{icon:"mdi-package-variant",size:"32",color:"primary"})]),l("div",null,[l("div",ka,r($.value),1),o[22]||(o[22]=l("div",{class:"text-body-2 text-on-surface-variant"},"Total Products",-1))])])]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(u,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(b,{class:"pa-4"},{default:t(()=>[l("div",$a,[l("div",Pa,[e(a,{icon:"mdi-check-circle",size:"32",color:"success"})]),l("div",null,[l("div",Ca,r($e.value),1),o[23]||(o[23]=l("div",{class:"text-body-2 text-on-surface-variant"},"Active Products",-1))])])]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(u,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(b,{class:"pa-4"},{default:t(()=>[l("div",Va,[l("div",Sa,[e(a,{icon:"mdi-alert-circle",size:"32",color:"warning"})]),l("div",null,[l("div",Aa,r(Ue.value),1),o[24]||(o[24]=l("div",{class:"text-body-2 text-on-surface-variant"},"Low Stock",-1))])])]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(u,{rounded:"xl",class:"stats-card",elevation:"2"},{default:t(()=>[e(b,{class:"pa-4"},{default:t(()=>[l("div",Da,[l("div",Ua,[e(a,{icon:"mdi-currency-php",size:"32",color:"info"})]),l("div",null,[l("div",za,"₱"+r(ze.value.toLocaleString()),1),o[25]||(o[25]=l("div",{class:"text-body-2 text-on-surface-variant"},"Total Value",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{rounded:"xl",class:"filters-card mb-6",elevation:"2"},{default:t(()=>[e(b,{class:"pa-6"},{default:t(()=>[o[28]||(o[28]=l("div",{class:"filters-header mb-4"},[l("h3",{class:"text-h6 font-weight-bold"},"Filter & Search Products"),l("p",{class:"text-body-2 text-medium-emphasis"},"Find products by name, category, or stock status")],-1)),e(O,null,{default:t(()=>[e(y,{cols:"12",md:"4"},{default:t(()=>[e(I,{modelValue:U.value,"onUpdate:modelValue":[o[1]||(o[1]=c=>U.value=c),Je(P)],label:"Search products...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable",clearable:"",class:"search-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(y,{cols:"12",md:"2"},{default:t(()=>[e(K,{modelValue:z.value,"onUpdate:modelValue":[o[2]||(o[2]=c=>z.value=c),ae],label:"Category",items:de,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"2"},{default:t(()=>[e(K,{modelValue:H.value,"onUpdate:modelValue":[o[3]||(o[3]=c=>H.value=c),G],label:"Stock Status",items:ne,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"2"},{default:t(()=>[e(K,{modelValue:X.value,"onUpdate:modelValue":[o[4]||(o[4]=c=>X.value=c),Pe],label:"Price Range",items:pe,variant:"outlined",density:"comfortable",clearable:"",class:"filter-select"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"2"},{default:t(()=>[e(s,{color:"primary",variant:"outlined",size:"large",block:"",onClick:fe,class:"reset-btn"},{default:t(()=>[e(a,{start:""},{default:t(()=>o[26]||(o[26]=[d("mdi-refresh")])),_:1,__:[26]}),o[27]||(o[27]=d(" Reset "))]),_:1,__:[27]})]),_:1})]),_:1})]),_:1,__:[28]})]),_:1}),e(u,{rounded:"xl",class:"products-table-card",elevation:"2"},{default:t(()=>[e(ke,{class:"table-header pa-6"},{default:t(()=>[l("div",Fa,[l("div",null,[o[29]||(o[29]=l("h3",{class:"text-h6 font-weight-bold"},"Products Catalog",-1)),l("p",Ta,r($.value)+" products found",1)]),l("div",Oa,[e(s,{variant:"outlined",size:"small","prepend-icon":"mdi-view-grid",onClick:o[5]||(o[5]=c=>q.value="grid"),color:q.value==="grid"?"primary":"default",class:"view-toggle-btn"},{default:t(()=>o[30]||(o[30]=[d(" Grid ")])),_:1,__:[30]},8,["color"]),e(s,{variant:"outlined",size:"small","prepend-icon":"mdi-view-list",onClick:o[6]||(o[6]=c=>q.value="table"),color:q.value==="table"?"primary":"default",class:"view-toggle-btn"},{default:t(()=>o[31]||(o[31]=[d(" Table ")])),_:1,__:[31]},8,["color"])])])]),_:1}),e(se),q.value==="table"?(x(),D("div",Ia,[e(We,{headers:_e,items:T.value,loading:A.value,"items-per-page":g.value,"hide-default-footer":"",class:"products-table"},{"item.title":t(({item:c})=>[l("div",Ma,[e(ue,{size:"48",rounded:"lg",class:"me-3"},{default:t(()=>{var ve,_;return[e(k,{src:((_=(ve=c.images)==null?void 0:ve[0])==null?void 0:_.image_url)||"/placeholder-product.png",cover:""},null,8,["src"])]}),_:2},1024),l("div",null,[l("div",Na,r(c.title),1),l("div",qa,r(c.description),1)])])]),"item.price":t(({item:c})=>[l("div",null,[l("div",Ea," ₱"+r(Number(c.price).toLocaleString()),1),c.is_on_sale?(x(),D("div",ja," ₱"+r(Number(c.original_price||0).toLocaleString()),1)):ie("",!0)])]),"item.quantity":t(({item:c})=>[e(Oe,{color:Ae(c.quantity),size:"small",variant:"tonal"},{default:t(()=>[e(a,{start:"",icon:Fe(c.quantity),size:"16"},null,8,["icon"]),d(" "+r(c.quantity)+" units ",1)]),_:2},1032,["color"])]),"item.is_on_sale":t(({item:c})=>[c.is_on_sale?(x(),Y(Oe,{key:0,color:"error",size:"small",variant:"tonal"},{default:t(()=>[d(r(c.discount_percentage)+"% OFF ",1)]),_:2},1024)):(x(),D("span",La,"—"))]),"item.created_at":t(({item:c})=>[l("div",Ra,r(Se(c.created_at)),1)]),"item.actions":t(({item:c})=>[l("div",Wa,[e(s,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary",onClick:ve=>ge(c),title:"Edit Product"},null,8,["onClick"]),e(s,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:ve=>oe(c),title:"Delete Product"},null,8,["onClick"])])]),_:1},8,["items","loading","items-per-page"])])):(x(),D("div",Ha,[e(O,null,{default:t(()=>[(x(!0),D(ye,null,be(T.value,c=>(x(),Y(y,{key:c.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:t(()=>[e(u,{class:"product-card",elevation:"3",rounded:"xl"},{default:t(()=>{var ve,_;return[e(k,{src:((_=(ve=c.images)==null?void 0:ve[0])==null?void 0:_.image_url)||"/placeholder-product.png",height:"200",cover:"",class:"product-image"},{default:t(()=>[l("div",Ba,[c.is_on_sale?(x(),Y(Oe,{key:0,color:"error",size:"small",variant:"elevated"},{default:t(()=>[d(r(c.discount_percentage)+"% OFF ",1)]),_:2},1024)):ie("",!0),e(Ce),e(Oe,{color:Ae(c.quantity),size:"small",variant:"elevated"},{default:t(()=>[d(r(c.quantity>0?"In Stock":"Out of Stock"),1)]),_:2},1032,["color"])])]),_:2},1032,["src"]),e(b,{class:"pa-4"},{default:t(()=>[l("h3",Ga,r(c.title),1),l("p",Qa,r(c.description),1),l("div",Ja,[l("div",null,[l("span",Za," ₱"+r(Number(c.price).toLocaleString()),1),c.is_on_sale?(x(),D("span",Ka," ₱"+r(Number(c.original_price||0).toLocaleString()),1)):ie("",!0)])]),l("div",Ya,[l("span",Xa," Stock: "+r(c.quantity)+" units ",1),l("span",eo,r(Se(c.created_at)),1)])]),_:2},1024),e(xe,{class:"pa-4 pt-0"},{default:t(()=>[e(s,{variant:"outlined",size:"small","prepend-icon":"mdi-pencil",onClick:je=>ge(c),class:"flex-grow-1"},{default:t(()=>o[32]||(o[32]=[d(" Edit ")])),_:2,__:[32]},1032,["onClick"]),e(s,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:je=>oe(c),title:"Delete Product"},null,8,["onClick"])]),_:2},1024)]}),_:2},1024)]),_:2},1024))),128))]),_:1})])),!A.value&&$.value>0?(x(),D("div",to,[e(se,{class:"footer-divider"}),l("div",lo,[l("div",ao,[l("div",oo,[l("span",so," Showing "+r((C.value-1)*g.value+1)+"-"+r(Math.min(C.value*g.value,$.value))+" of "+r($.value)+" products ",1)]),l("div",no,[o[33]||(o[33]=l("span",{class:"text-body-2 text-medium-emphasis me-2"},"Items per page:",-1)),e(K,{modelValue:g.value,"onUpdate:modelValue":[o[7]||(o[7]=c=>g.value=c),te],items:S,variant:"outlined",density:"compact","hide-details":"",class:"items-per-page-select"},null,8,["modelValue"])])]),l("div",io,[e(Ye,{modelValue:C.value,"onUpdate:modelValue":[o[8]||(o[8]=c=>C.value=c),F],length:Math.ceil($.value/g.value),"total-visible":7,density:"comfortable",class:"custom-pagination"},null,8,["modelValue","length"])])])])):ie("",!0)]),_:1}),A.value?(x(),D("div",ro,[l("div",uo,[e(Xe,{indeterminate:"",color:"primary",size:"64",width:"6"}),o[34]||(o[34]=l("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading products...",-1))])])):ie("",!0),!A.value&&T.value.length===0?(x(),Y(u,{key:1,rounded:"xl",class:"text-center py-16",elevation:"2"},{default:t(()=>[e(a,{size:"80",color:"grey-lighten-2",class:"mb-6"},{default:t(()=>o[35]||(o[35]=[d("mdi-package-variant-closed")])),_:1,__:[35]}),o[38]||(o[38]=l("h3",{class:"text-h4 font-weight-bold mb-3"},"No products found",-1)),l("p",co,r(U.value?"Try adjusting your search criteria or filters":"Start building your product catalog by adding your first product"),1),U.value?(x(),Y(s,{key:1,color:"primary",variant:"outlined",size:"large","prepend-icon":"mdi-refresh",onClick:fe},{default:t(()=>o[37]||(o[37]=[d(" Clear Filters ")])),_:1,__:[37]})):(x(),Y(s,{key:0,color:"primary",size:"large","prepend-icon":"mdi-plus",onClick:o[9]||(o[9]=c=>N.value=!0)},{default:t(()=>o[36]||(o[36]=[d(" Add Your First Product ")])),_:1,__:[36]}))]),_:1,__:[38]})):ie("",!0),e(Ge,{modelValue:N.value,"onUpdate:modelValue":o[17]||(o[17]=c=>N.value=c),"max-width":"800px",persistent:""},{default:t(()=>[e(u,{class:"product-form-dialog elevation-12",rounded:"xl"},{default:t(()=>[e(ke,{class:"dialog-header pa-0"},{default:t(()=>[l("div",mo,[l("div",vo,[e(ue,{size:"48",color:"primary",variant:"tonal"},{default:t(()=>[e(a,{size:"24"},{default:t(()=>o[39]||(o[39]=[d("mdi-package-variant-plus")])),_:1,__:[39]})]),_:1}),l("div",po,[l("h2",_o,r(v.value?"Edit Product":"Add New Product"),1),l("p",fo,r(v.value?"Update product information and inventory":"Create a new product for your catalog"),1)])]),e(s,{icon:"mdi-close",variant:"text",size:"small",class:"close-btn",onClick:re})])]),_:1}),e(se,{class:"header-divider"}),e(b,{class:"form-content"},{default:t(()=>[e(Be,{ref_key:"productFormRef",ref:j,modelValue:E.value,"onUpdate:modelValue":o[16]||(o[16]=c=>E.value=c),onSubmit:De(we,["prevent"])},{default:t(()=>[l("div",go,[l("div",yo,[e(a,{class:"section-icon",color:"primary"},{default:t(()=>o[40]||(o[40]=[d("mdi-information")])),_:1,__:[40]}),o[41]||(o[41]=l("div",{class:"section-info"},[l("h3",{class:"section-title"},"Basic Information"),l("p",{class:"section-description"},"Product name and description")],-1))]),e(O,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(I,{modelValue:w.title,"onUpdate:modelValue":o[10]||(o[10]=c=>w.title=c),label:"Product Name",variant:"outlined",rules:[c=>!!c||"Product name is required"],"prepend-inner-icon":"mdi-package-variant",class:"enhanced-field",required:""},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(et,{modelValue:w.description,"onUpdate:modelValue":o[11]||(o[11]=c=>w.description=c),label:"Product Description",variant:"outlined",rows:"3","prepend-inner-icon":"mdi-text",class:"enhanced-field"},null,8,["modelValue"])]),_:1})]),_:1})]),l("div",bo,[l("div",xo,[e(a,{class:"section-icon",color:"primary"},{default:t(()=>o[42]||(o[42]=[d("mdi-currency-php")])),_:1,__:[42]}),o[43]||(o[43]=l("div",{class:"section-info"},[l("h3",{class:"section-title"},"Pricing & Sales"),l("p",{class:"section-description"},"Set product price and sale information")],-1))]),e(O,null,{default:t(()=>[e(y,{cols:"12",md:"6"},{default:t(()=>[e(I,{modelValue:w.price,"onUpdate:modelValue":o[12]||(o[12]=c=>w.price=c),label:"Price",type:"number",variant:"outlined",rules:[c=>!!c||"Price is required",c=>c>0||"Price must be greater than 0"],"prepend-inner-icon":"mdi-currency-php",class:"enhanced-field",required:""},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12",md:"6"},{default:t(()=>[e(I,{modelValue:w.quantity,"onUpdate:modelValue":o[13]||(o[13]=c=>w.quantity=c),label:"Stock Quantity",type:"number",variant:"outlined",rules:[c=>c>=0||"Quantity cannot be negative"],"prepend-inner-icon":"mdi-package",class:"enhanced-field"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),l("div",ho,[l("div",wo,[e(a,{class:"section-icon",color:"primary"},{default:t(()=>o[44]||(o[44]=[d("mdi-image-multiple")])),_:1,__:[44]}),o[45]||(o[45]=l("div",{class:"section-info"},[l("h3",{class:"section-title"},"Product Images"),l("p",{class:"section-description"},"Upload thumbnail and additional product images")],-1))]),l("div",ko,[l("h4",$o,[e(a,{class:"me-2",color:"primary"},{default:t(()=>o[46]||(o[46]=[d("mdi-image")])),_:1,__:[46]}),o[47]||(o[47]=d(" Thumbnail Image "))]),o[48]||(o[48]=l("p",{class:"upload-section-description"},"Main product image (recommended: 800x800px)",-1)),l("div",Po,[e(He,{modelValue:w.thumbnail,"onUpdate:modelValue":o[14]||(o[14]=c=>w.thumbnail=c),accept:"image/jpeg,image/png,image/webp","prepend-icon":"","prepend-inner-icon":"mdi-camera",variant:"outlined",label:"Choose thumbnail image",class:"thumbnail-input",onChange:Te,"onClick:clear":p},null,8,["modelValue"]),J.value?(x(),D("div",Co,[e(u,{class:"preview-card",elevation:"2"},{default:t(()=>[e(k,{src:J.value,"aspect-ratio":"1",cover:"",class:"preview-image"},null,8,["src"]),e(xe,{class:"preview-actions"},{default:t(()=>[e(s,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:p})]),_:1})]),_:1})])):ie("",!0)])]),l("div",Vo,[l("h4",So,[e(a,{class:"me-2",color:"primary"},{default:t(()=>o[49]||(o[49]=[d("mdi-image-multiple")])),_:1,__:[49]}),o[50]||(o[50]=d(" Additional Images "))]),o[53]||(o[53]=l("p",{class:"upload-section-description"},"Upload multiple product images (up to 5 images)",-1)),l("div",Ao,[e(He,{modelValue:w.productImages,"onUpdate:modelValue":o[15]||(o[15]=c=>w.productImages=c),accept:"image/jpeg,image/png,image/webp",multiple:"","prepend-icon":"","prepend-inner-icon":"mdi-image-plus",variant:"outlined",label:"Choose additional images",class:"multiple-input",onChange:i},null,8,["modelValue"]),Z.value.length>0?(x(),D("div",Do,[(x(!0),D(ye,null,be(Z.value,(c,ve)=>(x(),D("div",{key:ve,class:"image-preview-item"},[e(u,{class:"preview-card",elevation:"2"},{default:t(()=>[e(k,{src:c,"aspect-ratio":"1",cover:"",class:"preview-image"},null,8,["src"]),e(xe,{class:"preview-actions"},{default:t(()=>[e(s,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:_=>M(ve)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])):ie("",!0),v.value&&w.existingImages.length>0?(x(),D("div",Uo,[o[52]||(o[52]=l("h5",{class:"existing-images-title"},"Current Images",-1)),l("div",zo,[(x(!0),D(ye,null,be(w.existingImages,(c,ve)=>(x(),D("div",{key:c.id,class:"image-preview-item"},[e(u,{class:"preview-card",elevation:"2"},{default:t(()=>[e(k,{src:c.image_url,"aspect-ratio":"1",cover:"",class:"preview-image"},null,8,["src"]),e(xe,{class:"preview-actions"},{default:t(()=>[c.is_thumbnail?(x(),Y(Oe,{key:0,size:"x-small",color:"primary",class:"thumbnail-badge"},{default:t(()=>o[51]||(o[51]=[d(" Thumbnail ")])),_:1,__:[51]})):ie("",!0),e(Ce),e(s,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:_=>Q(ve)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])])):ie("",!0)])])])]),_:1},8,["modelValue"])]),_:1}),e(se),e(xe,{class:"form-actions"},{default:t(()=>[ee.value?(x(),D("div",Fo,[e(tt,{indeterminate:"",color:"primary",class:"mb-2"}),o[54]||(o[54]=l("span",{class:"text-caption text-medium-emphasis"},"Uploading images...",-1))])):ie("",!0),e(Ce),e(s,{variant:"text",size:"large",onClick:re,disabled:W.value||ee.value,class:"cancel-btn"},{default:t(()=>o[55]||(o[55]=[d(" Cancel ")])),_:1,__:[55]},8,["disabled"]),e(s,{color:"primary",variant:"flat",size:"large",onClick:we,loading:W.value||ee.value,disabled:!E.value,class:"save-btn"},{default:t(()=>[e(a,{start:""},{default:t(()=>[d(r(v.value?"mdi-content-save":"mdi-plus"),1)]),_:1}),d(" "+r(v.value?"Update Product":"Create Product"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ge,{modelValue:m.value,"onUpdate:modelValue":o[19]||(o[19]=c=>m.value=c),"max-width":"500px",persistent:""},{default:t(()=>[e(u,{rounded:"xl",elevation:"12"},{default:t(()=>[e(ke,{class:"dialog-header pa-6"},{default:t(()=>[l("div",To,[e(ue,{size:"40",color:"error",variant:"tonal",class:"me-3"},{default:t(()=>[e(a,null,{default:t(()=>o[56]||(o[56]=[d("mdi-delete-alert")])),_:1,__:[56]})]),_:1}),o[57]||(o[57]=l("div",null,[l("h3",{class:"text-h6 font-weight-bold"},"Delete Product"),l("p",{class:"text-body-2 text-medium-emphasis"},"This action cannot be undone")],-1))])]),_:1}),e(se),e(b,{class:"pa-6"},{default:t(()=>{var c;return[l("p",Oo,[o[58]||(o[58]=d(" Are you sure you want to delete ")),l("strong",null,'"'+r((c=R.value)==null?void 0:c.title)+'"',1),o[59]||(o[59]=d("? "))]),o[60]||(o[60]=l("p",{class:"text-body-2 text-medium-emphasis"}," This will permanently remove the product from your catalog. This action cannot be undone. ",-1))]}),_:1,__:[60]}),e(se),e(xe,{class:"pa-6"},{default:t(()=>[e(Ce),e(s,{variant:"text",onClick:o[18]||(o[18]=c=>m.value=!1),disabled:V.value},{default:t(()=>o[61]||(o[61]=[d(" Cancel ")])),_:1,__:[61]},8,["disabled"]),e(s,{color:"error",variant:"flat",onClick:le,loading:V.value},{default:t(()=>[e(a,{start:""},{default:t(()=>o[62]||(o[62]=[d("mdi-delete")])),_:1,__:[62]}),o[63]||(o[63]=d(" Delete Product "))]),_:1,__:[63]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Mo=Ke(Io,[["__scopeId","data-v-81f19ba5"]]),hs=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),No={class:"d-flex align-center mb-6"},qo={class:"text-h4"},Eo={class:"text-center pa-8"},jo=Ne({__name:"ProductFormView",setup(Ee){const L=it(),T=lt(),A=f(!1),C=f(),g=f({name:"",category:"",sku:"",description:"",price:0,costPrice:0,stock:0,brand:"",status:"active",featured:!1,metaTitle:"",metaDescription:"",slug:""}),$=["Dog Food","Cat Food","Toys","Accessories","Health & Wellness","Grooming","Training","Treats"],q=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Draft",value:"draft"},{title:"Out of Stock",value:"out_of_stock"}],U={required:m=>!!m||"This field is required",positiveNumber:m=>m>0||"Must be a positive number",positiveInteger:m=>m>0&&Number.isInteger(m)||"Must be a positive integer"},z=me(()=>!!L.params.id);Ie(()=>g.value.name,m=>{m&&!g.value.slug&&(g.value.slug=m.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const H=async()=>{if(C.value.validate())try{z.value?console.log("Updating product:",g.value):console.log("Creating product:",g.value),T.push("/products")}catch(m){console.error("Error saving product:",m)}},X=async()=>{try{g.value.status="draft",console.log("Saving draft:",g.value),T.push("/products")}catch(m){console.error("Error saving draft:",m)}},N=async()=>{if(z.value){const m=L.params.id;console.log("Loading product:",m),g.value={id:Number(m),name:"Premium Dog Food",category:"Dog Food",sku:"PDF001",description:"High-quality premium dog food for adult dogs",price:29.99,costPrice:15,stock:100,brand:"PetSmart Premium",status:"active",featured:!0,metaTitle:"Premium Dog Food - PetSmart",metaDescription:"High-quality premium dog food for adult dogs. Made with natural ingredients.",slug:"premium-dog-food"}}};return qe(()=>{N()}),(m,v)=>{const R=n("v-icon"),B=n("v-btn"),E=n("v-col"),j=n("v-row"),W=n("v-card-title"),V=n("v-text-field"),J=n("v-select"),Z=n("v-textarea"),ee=n("v-switch"),w=n("v-form"),de=n("v-card-text"),ne=n("v-card"),pe=n("v-container");return x(),Y(pe,{fluid:""},{default:t(()=>[e(j,null,{default:t(()=>[e(E,{cols:"12"},{default:t(()=>[l("div",No,[e(B,{icon:"",onClick:v[0]||(v[0]=S=>m.$router.go(-1)),class:"mr-4"},{default:t(()=>[e(R,null,{default:t(()=>v[16]||(v[16]=[d("mdi-arrow-left")])),_:1,__:[16]})]),_:1}),l("h1",qo,r(z.value?"Edit Product":"New Product"),1)])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(E,{cols:"12",md:"8"},{default:t(()=>[e(ne,null,{default:t(()=>[e(W,null,{default:t(()=>v[17]||(v[17]=[d("Product Information")])),_:1,__:[17]}),e(de,null,{default:t(()=>[e(w,{ref_key:"form",ref:C,modelValue:A.value,"onUpdate:modelValue":v[11]||(v[11]=S=>A.value=S)},{default:t(()=>[e(j,null,{default:t(()=>[e(E,{cols:"12"},{default:t(()=>[e(V,{modelValue:g.value.name,"onUpdate:modelValue":v[1]||(v[1]=S=>g.value.name=S),label:"Product Name",rules:[U.required],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12",md:"6"},{default:t(()=>[e(J,{modelValue:g.value.category,"onUpdate:modelValue":v[2]||(v[2]=S=>g.value.category=S),items:$,label:"Category",rules:[U.required],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:g.value.sku,"onUpdate:modelValue":v[3]||(v[3]=S=>g.value.sku=S),label:"SKU",rules:[U.required],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12"},{default:t(()=>[e(Z,{modelValue:g.value.description,"onUpdate:modelValue":v[4]||(v[4]=S=>g.value.description=S),label:"Description",rows:"4",rules:[U.required],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12",md:"4"},{default:t(()=>[e(V,{modelValue:g.value.price,"onUpdate:modelValue":v[5]||(v[5]=S=>g.value.price=S),modelModifiers:{number:!0},label:"Price",type:"number",step:"0.01",prefix:"$",rules:[U.required,U.positiveNumber],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12",md:"4"},{default:t(()=>[e(V,{modelValue:g.value.costPrice,"onUpdate:modelValue":v[6]||(v[6]=S=>g.value.costPrice=S),modelModifiers:{number:!0},label:"Cost Price",type:"number",step:"0.01",prefix:"$",rules:[U.required,U.positiveNumber],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12",md:"4"},{default:t(()=>[e(V,{modelValue:g.value.stock,"onUpdate:modelValue":v[7]||(v[7]=S=>g.value.stock=S),modelModifiers:{number:!0},label:"Stock Quantity",type:"number",rules:[U.required,U.positiveInteger],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:g.value.brand,"onUpdate:modelValue":v[8]||(v[8]=S=>g.value.brand=S),label:"Brand",rules:[U.required],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12",md:"6"},{default:t(()=>[e(J,{modelValue:g.value.status,"onUpdate:modelValue":v[9]||(v[9]=S=>g.value.status=S),items:q,label:"Status",rules:[U.required],required:""},null,8,["modelValue","rules"])]),_:1}),e(E,{cols:"12"},{default:t(()=>[e(ee,{modelValue:g.value.featured,"onUpdate:modelValue":v[10]||(v[10]=S=>g.value.featured=S),label:"Featured Product",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",md:"4"},{default:t(()=>[e(ne,{class:"mb-4"},{default:t(()=>[e(W,null,{default:t(()=>v[18]||(v[18]=[d("Product Images")])),_:1,__:[18]}),e(de,null,{default:t(()=>[l("div",Eo,[e(R,{size:"64",color:"grey"},{default:t(()=>v[19]||(v[19]=[d("mdi-image-multiple")])),_:1,__:[19]}),v[22]||(v[22]=l("div",{class:"text-h6 mt-4"},"Image Upload",-1)),v[23]||(v[23]=l("div",{class:"text-body-2 text-grey"},"Image upload functionality will be implemented here",-1)),e(B,{color:"primary",class:"mt-4"},{default:t(()=>[e(R,{left:""},{default:t(()=>v[20]||(v[20]=[d("mdi-upload")])),_:1,__:[20]}),v[21]||(v[21]=d(" Upload Images "))]),_:1,__:[21]})])]),_:1})]),_:1}),e(ne,{class:"mb-4"},{default:t(()=>[e(W,null,{default:t(()=>v[24]||(v[24]=[d("SEO Settings")])),_:1,__:[24]}),e(de,null,{default:t(()=>[e(V,{modelValue:g.value.metaTitle,"onUpdate:modelValue":v[12]||(v[12]=S=>g.value.metaTitle=S),label:"Meta Title",counter:"60"},null,8,["modelValue"]),e(Z,{modelValue:g.value.metaDescription,"onUpdate:modelValue":v[13]||(v[13]=S=>g.value.metaDescription=S),label:"Meta Description",rows:"3",counter:"160"},null,8,["modelValue"]),e(V,{modelValue:g.value.slug,"onUpdate:modelValue":v[14]||(v[14]=S=>g.value.slug=S),label:"URL Slug",hint:"Auto-generated from product name","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),e(ne,null,{default:t(()=>[e(W,null,{default:t(()=>v[25]||(v[25]=[d("Actions")])),_:1,__:[25]}),e(de,null,{default:t(()=>[e(B,{color:"primary",block:"",class:"mb-2",disabled:!A.value,onClick:H},{default:t(()=>[d(r(z.value?"Update Product":"Create Product"),1)]),_:1},8,["disabled"]),e(B,{text:"",block:"",class:"mb-2",onClick:X},{default:t(()=>v[26]||(v[26]=[d(" Save as Draft ")])),_:1,__:[26]}),e(B,{text:"",block:"",onClick:v[15]||(v[15]=S=>m.$router.go(-1))},{default:t(()=>v[27]||(v[27]=[d(" Cancel ")])),_:1,__:[27]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),ws=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),Lo={class:"orders-view"},Ro={class:"text-h4 font-weight-bold"},Wo={class:"text-subtitle-2 text-medium-emphasis"},Ho={class:"font-weight-medium"},Bo={class:"font-weight-medium"},Go={class:"text-caption text-medium-emphasis"},Qo={class:"text-caption"},Jo={class:"font-weight-medium"},Zo={class:"text-caption"},Ko={class:"text-center py-8"},Yo={class:"text-body-2 text-medium-emphasis"},Xo={class:"mb-4"},es=Ne({__name:"OrdersView",setup(Ee){const L=lt(),T=Qe(),A=f([]),C=f(!1),g=f(!1),$=f(""),q=f(""),U=f(""),z=f(""),H=f("created_at"),X=f(1),N=f(10),m=f(0),v=f(!1),R=f(null),B=f(""),E=f(""),j=f([{title:"Total Orders",value:"0",icon:"mdi-shopping",color:"primary"},{title:"Pending",value:"0",icon:"mdi-clock",color:"warning"},{title:"Confirmed",value:"0",icon:"mdi-check",color:"info"},{title:"Delivered",value:"0",icon:"mdi-truck",color:"success"}]),W=[{title:"Order ID",key:"id",sortable:!0},{title:"Customer",key:"customer",sortable:!1},{title:"Items",key:"items",sortable:!1},{title:"Total",key:"total_amount",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Date",key:"created_at",sortable:!0},{title:"Actions",key:"actions",sortable:!1}],V=[{title:"All Status",value:""},{title:"Pending",value:"pending"},{title:"Confirmed",value:"confirmed"},{title:"Processing",value:"processing"},{title:"Shipped",value:"shipped"},{title:"Delivered",value:"delivered"},{title:"Cancelled",value:"cancelled"}],J=[{title:"Newest First",value:"created_at"},{title:"Oldest First",value:"created_at_asc"},{title:"Highest Amount",value:"total_amount"},{title:"Lowest Amount",value:"total_amount_asc"}],Z=[{title:"Confirmed",value:"confirmed"},{title:"Processing",value:"processing"},{title:"Shipped",value:"shipped"},{title:"Delivered",value:"delivered"},{title:"Cancelled",value:"cancelled"}],ee=me(()=>{const F={total:0,pending:0,confirmed:0,delivered:0};return A.value.forEach(P=>{F.total++,P.status==="pending"&&F.pending++,P.status==="confirmed"&&F.confirmed++,P.status==="delivered"&&F.delivered++}),F}),w=async()=>{C.value=!0;try{const F=[{id:"order-123456789",customer_name:"John Doe",customer_email:"john@example.com",order_items:[{id:1},{id:2}],total_amount:1500,status:"pending",created_at:new Date().toISOString()}];A.value=F,m.value=F.length;const P=ee.value;j.value[0].value=P.total.toString(),j.value[1].value=P.pending.toString(),j.value[2].value=P.confirmed.toString(),j.value[3].value=P.delivered.toString()}catch(F){T.error("Failed to load orders"),console.error("Error loading orders:",F)}finally{C.value=!1}},de=Ze(()=>{X.value=1,w()},500),ne=F=>{X.value=F.page,N.value=F.itemsPerPage,w()},pe=F=>Me(new Date(F),"MMM dd, yyyy HH:mm"),S=F=>{switch(F){case"pending":return"warning";case"confirmed":return"info";case"processing":return"primary";case"shipped":return"purple";case"delivered":return"success";case"cancelled":return"error";default:return"grey"}},_e=F=>{L.push(`/orders/${F.id}`)},$e=(F,P)=>{R.value=F,B.value=P,E.value="",v.value=!0},Ue=async()=>{g.value=!0;try{T.success("Order status updated successfully"),v.value=!1,w()}catch(F){T.error("Failed to update order status"),console.error("Error updating order status:",F)}finally{g.value=!1}},ze=F=>{T.info("Print functionality not implemented")},Se=F=>{T.info("Notification sent to customer")},Ae=()=>{T.info("Export functionality not implemented")},Fe=()=>{$.value="",q.value="",U.value="",z.value="",H.value="created_at",X.value=1,w()};return qe(()=>{w()}),(F,P)=>{const ae=n("v-col"),G=n("v-btn"),Pe=n("v-row"),fe=n("v-icon"),te=n("v-avatar"),ge=n("v-card-text"),re=n("v-card"),he=n("v-text-field"),we=n("v-select"),Te=n("v-chip"),p=n("v-list-item-title"),i=n("v-list-item"),M=n("v-divider"),Q=n("v-list"),oe=n("v-menu"),le=n("v-data-table"),h=n("v-card-title"),o=n("v-textarea"),s=n("v-spacer"),a=n("v-card-actions"),b=n("v-dialog");return x(),D("div",Lo,[e(Pe,{class:"mb-6"},{default:t(()=>[e(ae,{cols:"12",md:"6"},{default:t(()=>P[9]||(P[9]=[l("h1",{class:"text-h3 font-weight-bold mb-2"},"Order Management",-1),l("p",{class:"text-subtitle-1 text-medium-emphasis"}," Track and manage customer orders ",-1)])),_:1,__:[9]}),e(ae,{cols:"12",md:"6",class:"d-flex justify-end align-center"},{default:t(()=>[e(G,{color:"primary","prepend-icon":"mdi-download",variant:"outlined",class:"me-2",onClick:Ae},{default:t(()=>P[10]||(P[10]=[d(" Export ")])),_:1,__:[10]}),e(G,{color:"primary","prepend-icon":"mdi-plus",onClick:P[0]||(P[0]=u=>F.$router.push("/orders/new"))},{default:t(()=>P[11]||(P[11]=[d(" New Order ")])),_:1,__:[11]})]),_:1})]),_:1}),e(Pe,{class:"mb-6"},{default:t(()=>[(x(!0),D(ye,null,be(j.value,u=>(x(),Y(ae,{key:u.title,cols:"12",sm:"6",md:"3"},{default:t(()=>[e(re,{elevation:"2"},{default:t(()=>[e(ge,{class:"d-flex align-center"},{default:t(()=>[e(te,{color:u.color,size:"48",class:"me-4"},{default:t(()=>[e(fe,{icon:u.icon,color:"white"},null,8,["icon"])]),_:2},1032,["color"]),l("div",null,[l("div",Ro,r(u.value),1),l("div",Wo,r(u.title),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(re,{class:"mb-6",elevation:"2"},{default:t(()=>[e(ge,null,{default:t(()=>[e(Pe,null,{default:t(()=>[e(ae,{cols:"12",md:"3"},{default:t(()=>[e(he,{modelValue:$.value,"onUpdate:modelValue":P[1]||(P[1]=u=>$.value=u),label:"Search orders...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",onInput:Je(de)},null,8,["modelValue","onInput"])]),_:1}),e(ae,{cols:"12",md:"2"},{default:t(()=>[e(we,{modelValue:q.value,"onUpdate:modelValue":[P[2]||(P[2]=u=>q.value=u),w],label:"Status",items:V,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),e(ae,{cols:"12",md:"2"},{default:t(()=>[e(he,{modelValue:U.value,"onUpdate:modelValue":P[3]||(P[3]=u=>U.value=u),label:"From Date",type:"date",variant:"outlined",density:"compact",onChange:w},null,8,["modelValue"])]),_:1}),e(ae,{cols:"12",md:"2"},{default:t(()=>[e(he,{modelValue:z.value,"onUpdate:modelValue":P[4]||(P[4]=u=>z.value=u),label:"To Date",type:"date",variant:"outlined",density:"compact",onChange:w},null,8,["modelValue"])]),_:1}),e(ae,{cols:"12",md:"2"},{default:t(()=>[e(we,{modelValue:H.value,"onUpdate:modelValue":[P[5]||(P[5]=u=>H.value=u),w],label:"Sort By",items:J,variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(ae,{cols:"12",md:"1"},{default:t(()=>[e(G,{color:"primary",variant:"outlined",block:"",onClick:Fe},{default:t(()=>P[12]||(P[12]=[d(" Reset ")])),_:1,__:[12]})]),_:1})]),_:1})]),_:1})]),_:1}),e(re,{elevation:"2"},{default:t(()=>[e(le,{headers:W,items:A.value,loading:C.value,"items-per-page":N.value,page:X.value,"server-items-length":m.value,"onUpdate:options":ne,class:"elevation-0"},{"item.id":t(({item:u})=>[l("span",Ho,"#"+r(u.id.slice(-8)),1)]),"item.customer":t(({item:u})=>[l("div",null,[l("div",Bo,r(u.customer_name||"N/A"),1),l("div",Go,r(u.customer_email||""),1)])]),"item.items":t(({item:u})=>{var y;return[l("div",Qo,r(((y=u.order_items)==null?void 0:y.length)||0)+" item(s) ",1)]}),"item.total_amount":t(({item:u})=>{var y;return[l("span",Jo,"₱"+r(((y=u.total_amount)==null?void 0:y.toLocaleString())||"0"),1)]}),"item.status":t(({item:u})=>[e(Te,{color:S(u.status),size:"small",variant:"tonal"},{default:t(()=>[d(r(u.status),1)]),_:2},1032,["color"])]),"item.created_at":t(({item:u})=>[l("span",Zo,r(pe(u.created_at)),1)]),"item.actions":t(({item:u})=>[e(G,{icon:"mdi-eye",size:"small",variant:"text",onClick:y=>_e(u)},null,8,["onClick"]),e(oe,null,{activator:t(({props:y})=>[e(G,Re({icon:"mdi-dots-vertical",size:"small",variant:"text"},y),null,16)]),default:t(()=>[e(Q,null,{default:t(()=>[(x(),D(ye,null,be(Z,y=>e(i,{key:y.value,onClick:O=>$e(u,y.value)},{default:t(()=>[e(p,null,{default:t(()=>[d("Mark as "+r(y.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64)),e(M),e(i,{onClick:y=>ze(u)},{default:t(()=>[e(p,null,{default:t(()=>P[13]||(P[13]=[d("Print Order")])),_:1,__:[13]})]),_:2},1032,["onClick"]),e(i,{onClick:y=>Se(u)},{default:t(()=>[e(p,null,{default:t(()=>P[14]||(P[14]=[d("Send Notification")])),_:1,__:[14]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),"no-data":t(()=>[l("div",Ko,[e(fe,{size:"64",color:"grey-lighten-2",class:"mb-4"},{default:t(()=>P[15]||(P[15]=[d("mdi-shopping-outline")])),_:1,__:[15]}),P[16]||(P[16]=l("h3",{class:"text-h6 mb-2"},"No orders found",-1)),l("p",Yo,r($.value?"Try adjusting your search criteria":"Orders will appear here when customers place them"),1)])]),_:1},8,["items","loading","items-per-page","page","server-items-length"])]),_:1}),e(b,{modelValue:v.value,"onUpdate:modelValue":P[8]||(P[8]=u=>v.value=u),"max-width":"400"},{default:t(()=>[e(re,null,{default:t(()=>[e(h,null,{default:t(()=>P[17]||(P[17]=[d("Update Order Status")])),_:1,__:[17]}),e(ge,null,{default:t(()=>{var u,y;return[l("p",Xo," Update order #"+r((y=(u=R.value)==null?void 0:u.id)==null?void 0:y.slice(-8))+" to "+r(B.value)+"? ",1),e(o,{modelValue:E.value,"onUpdate:modelValue":P[6]||(P[6]=O=>E.value=O),label:"Notes (optional)",variant:"outlined",rows:"3",placeholder:"Add any notes about this status change..."},null,8,["modelValue"])]}),_:1}),e(a,null,{default:t(()=>[e(s),e(G,{variant:"text",onClick:P[7]||(P[7]=u=>v.value=!1)},{default:t(()=>P[18]||(P[18]=[d("Cancel")])),_:1,__:[18]}),e(G,{color:"primary",loading:g.value,onClick:Ue},{default:t(()=>P[19]||(P[19]=[d(" Update Status ")])),_:1,__:[19]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),ts=Ke(es,[["__scopeId","data-v-af29992c"]]),ks=Object.freeze(Object.defineProperty({__proto__:null,default:ts},Symbol.toStringTag,{value:"Module"})),ls={class:"d-flex align-center mb-6"},as={class:"text-h6"},os={class:"text-h6"},ss={class:"text-h6"},ns={class:"text-h6"},is={class:"text-caption"},ds={class:"text-subtitle-2"},rs={class:"text-body-2 text-grey"},us={class:"mb-3"},cs={class:"mb-3"},ms={class:"mb-3"},vs=Ne({__name:"OrderDetailView",setup(Ee){const L=it(),T=f(!0),A=f(null),C=[{title:"Product",key:"name"},{title:"Price",key:"price"},{title:"Quantity",key:"quantity"},{title:"Total",key:"total"}],g=N=>{switch(N==null?void 0:N.toLowerCase()){case"pending":return"warning";case"processing":return"info";case"shipped":return"primary";case"delivered":return"success";case"cancelled":return"error";default:return"grey"}},$=N=>new Date(N).toLocaleDateString(),q=N=>new Date(N).toLocaleString(),U=()=>{console.log("Update order status")},z=()=>{console.log("Print order")},H=()=>{console.log("Contact customer")},X=async()=>{T.value=!0;const N=L.params.id;A.value={id:Number(N),customerName:"John Doe",customerEmail:"john@example.com",customerPhone:"+1 (555) 123-4567",status:"Processing",total:89.97,createdAt:"2024-01-15T10:00:00Z",items:[{id:1,name:"Premium Dog Food",price:29.99,quantity:2},{id:2,name:"Dog Toy Set",price:19.99,quantity:1},{id:3,name:"Pet Shampoo",price:9.99,quantity:1}],timeline:[{id:1,title:"Order Placed",description:"Order was successfully placed",timestamp:"2024-01-15T10:00:00Z",color:"success"},{id:2,title:"Payment Confirmed",description:"Payment has been processed",timestamp:"2024-01-15T10:05:00Z",color:"success"},{id:3,title:"Processing",description:"Order is being prepared for shipment",timestamp:"2024-01-15T11:00:00Z",color:"info"}],shippingAddress:{street:"123 Main St",city:"Anytown",state:"CA",zipCode:"12345",country:"USA"}},T.value=!1};return qe(()=>{X()}),(N,m)=>{const v=n("v-icon"),R=n("v-btn"),B=n("v-spacer"),E=n("v-chip"),j=n("v-col"),W=n("v-row"),V=n("v-progress-circular"),J=n("v-card-title"),Z=n("v-card-text"),ee=n("v-card"),w=n("v-data-table"),de=n("v-timeline-item"),ne=n("v-timeline"),pe=n("v-container");return x(),Y(pe,{fluid:""},{default:t(()=>[e(W,null,{default:t(()=>[e(j,{cols:"12"},{default:t(()=>{var S;return[l("div",ls,[e(R,{icon:"",onClick:m[0]||(m[0]=_e=>N.$router.go(-1)),class:"mr-4"},{default:t(()=>[e(v,null,{default:t(()=>m[1]||(m[1]=[d("mdi-arrow-left")])),_:1,__:[1]})]),_:1}),m[2]||(m[2]=l("h1",{class:"text-h4"},"Order Details",-1)),e(B),e(E,{color:g((S=A.value)==null?void 0:S.status),"text-color":"white",large:""},{default:t(()=>{var _e;return[d(r((_e=A.value)==null?void 0:_e.status),1)]}),_:1},8,["color"])])]}),_:1})]),_:1}),T.value?(x(),Y(W,{key:0},{default:t(()=>[e(j,{cols:"12",class:"text-center"},{default:t(()=>[e(V,{indeterminate:"",color:"primary",size:"64"}),m[3]||(m[3]=l("div",{class:"mt-4"},"Loading order details...",-1))]),_:1,__:[3]})]),_:1})):A.value?(x(),Y(W,{key:1},{default:t(()=>[e(j,{cols:"12",md:"8"},{default:t(()=>[e(ee,{class:"mb-4"},{default:t(()=>[e(J,null,{default:t(()=>m[4]||(m[4]=[d("Order Information")])),_:1,__:[4]}),e(Z,null,{default:t(()=>[e(W,null,{default:t(()=>[e(j,{cols:"6"},{default:t(()=>[m[5]||(m[5]=l("div",{class:"text-subtitle-2"},"Order ID",-1)),l("div",as,"#"+r(A.value.id),1)]),_:1,__:[5]}),e(j,{cols:"6"},{default:t(()=>[m[6]||(m[6]=l("div",{class:"text-subtitle-2"},"Order Date",-1)),l("div",os,r($(A.value.createdAt)),1)]),_:1,__:[6]}),e(j,{cols:"6"},{default:t(()=>[m[7]||(m[7]=l("div",{class:"text-subtitle-2"},"Customer",-1)),l("div",ss,r(A.value.customerName),1)]),_:1,__:[7]}),e(j,{cols:"6"},{default:t(()=>[m[8]||(m[8]=l("div",{class:"text-subtitle-2"},"Total Amount",-1)),l("div",ns,"$"+r(A.value.total.toFixed(2)),1)]),_:1,__:[8]})]),_:1})]),_:1})]),_:1}),e(ee,{class:"mb-4"},{default:t(()=>[e(J,null,{default:t(()=>m[9]||(m[9]=[d("Order Items")])),_:1,__:[9]}),e(w,{headers:C,items:A.value.items,"hide-default-footer":"","disable-pagination":""},{"item.total":t(({item:S})=>[d(" $"+r((S.price*S.quantity).toFixed(2)),1)]),_:1},8,["items"])]),_:1}),e(ee,null,{default:t(()=>[e(J,null,{default:t(()=>m[10]||(m[10]=[d("Order Timeline")])),_:1,__:[10]}),e(ne,{dense:""},{default:t(()=>[(x(!0),D(ye,null,be(A.value.timeline,S=>(x(),Y(de,{key:S.id,color:S.color,small:""},{opposite:t(()=>[l("span",is,r(q(S.timestamp)),1)]),default:t(()=>[l("div",null,[l("div",ds,r(S.title),1),l("div",rs,r(S.description),1)])]),_:2},1032,["color"]))),128))]),_:1})]),_:1})]),_:1}),e(j,{cols:"12",md:"4"},{default:t(()=>[e(ee,{class:"mb-4"},{default:t(()=>[e(J,null,{default:t(()=>m[11]||(m[11]=[d("Customer Information")])),_:1,__:[11]}),e(Z,null,{default:t(()=>[l("div",us,[m[12]||(m[12]=l("div",{class:"text-subtitle-2"},"Name",-1)),l("div",null,r(A.value.customerName),1)]),l("div",cs,[m[13]||(m[13]=l("div",{class:"text-subtitle-2"},"Email",-1)),l("div",null,r(A.value.customerEmail),1)]),l("div",ms,[m[14]||(m[14]=l("div",{class:"text-subtitle-2"},"Phone",-1)),l("div",null,r(A.value.customerPhone),1)])]),_:1})]),_:1}),e(ee,{class:"mb-4"},{default:t(()=>[e(J,null,{default:t(()=>m[15]||(m[15]=[d("Shipping Address")])),_:1,__:[15]}),e(Z,null,{default:t(()=>[l("div",null,r(A.value.shippingAddress.street),1),l("div",null,r(A.value.shippingAddress.city)+", "+r(A.value.shippingAddress.state)+" "+r(A.value.shippingAddress.zipCode),1),l("div",null,r(A.value.shippingAddress.country),1)]),_:1})]),_:1}),e(ee,null,{default:t(()=>[e(J,null,{default:t(()=>m[16]||(m[16]=[d("Actions")])),_:1,__:[16]}),e(Z,null,{default:t(()=>[e(R,{color:"primary",block:"",class:"mb-2",onClick:U},{default:t(()=>m[17]||(m[17]=[d(" Update Status ")])),_:1,__:[17]}),e(R,{color:"success",block:"",class:"mb-2",onClick:z},{default:t(()=>m[18]||(m[18]=[d(" Print Order ")])),_:1,__:[18]}),e(R,{color:"info",block:"",onClick:H},{default:t(()=>m[19]||(m[19]=[d(" Contact Customer ")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1})]),_:1})):(x(),Y(W,{key:2},{default:t(()=>[e(j,{cols:"12",class:"text-center"},{default:t(()=>[e(v,{size:"64",color:"grey"},{default:t(()=>m[20]||(m[20]=[d("mdi-package-variant")])),_:1,__:[20]}),m[21]||(m[21]=l("div",{class:"text-h6 mt-4"},"Order not found",-1)),m[22]||(m[22]=l("div",{class:"text-body-2 text-grey"},"The requested order could not be found",-1))]),_:1,__:[21,22]})]),_:1}))]),_:1})}}}),$s=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"}));export{xs as A,ks as O,bs as P,hs as a,ws as b,$s as c};
//# sourceMappingURL=content-BIIrP1ff.js.map
